<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1, minimum-scale=1" />
<meta name="generator" content="pdoc 0.10.0" />
<title>tinytroupe.agent.mental_faculty API documentation</title>
<meta name="description" content="" />
<link rel="preload stylesheet" as="style" href="https://cdnjs.cloudflare.com/ajax/libs/10up-sanitize.css/11.0.1/sanitize.min.css" integrity="sha256-PK9q560IAAa6WVRRh76LtCaI8pjTJ2z11v0miyNNjrs=" crossorigin>
<link rel="preload stylesheet" as="style" href="https://cdnjs.cloudflare.com/ajax/libs/10up-sanitize.css/11.0.1/typography.min.css" integrity="sha256-7l/o7C8jubJiy74VsKTidCy1yBkRtiUGbVkYBylBqUg=" crossorigin>
<link rel="stylesheet preload" as="style" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.1.1/styles/github.min.css" crossorigin>
<style>:root{--highlight-color:#fe9}.flex{display:flex !important}body{line-height:1.5em}#content{padding:20px}#sidebar{padding:30px;overflow:hidden}#sidebar > *:last-child{margin-bottom:2cm}.http-server-breadcrumbs{font-size:130%;margin:0 0 15px 0}#footer{font-size:.75em;padding:5px 30px;border-top:1px solid #ddd;text-align:right}#footer p{margin:0 0 0 1em;display:inline-block}#footer p:last-child{margin-right:30px}h1,h2,h3,h4,h5{font-weight:300}h1{font-size:2.5em;line-height:1.1em}h2{font-size:1.75em;margin:1em 0 .50em 0}h3{font-size:1.4em;margin:25px 0 10px 0}h4{margin:0;font-size:105%}h1:target,h2:target,h3:target,h4:target,h5:target,h6:target{background:var(--highlight-color);padding:.2em 0}a{color:#058;text-decoration:none;transition:color .3s ease-in-out}a:hover{color:#e82}.title code{font-weight:bold}h2[id^="header-"]{margin-top:2em}.ident{color:#900}pre code{background:#f8f8f8;font-size:.8em;line-height:1.4em}code{background:#f2f2f1;padding:1px 4px;overflow-wrap:break-word}h1 code{background:transparent}pre{background:#f8f8f8;border:0;border-top:1px solid #ccc;border-bottom:1px solid #ccc;margin:1em 0;padding:1ex}#http-server-module-list{display:flex;flex-flow:column}#http-server-module-list div{display:flex}#http-server-module-list dt{min-width:10%}#http-server-module-list p{margin-top:0}.toc ul,#index{list-style-type:none;margin:0;padding:0}#index code{background:transparent}#index h3{border-bottom:1px solid #ddd}#index ul{padding:0}#index h4{margin-top:.6em;font-weight:bold}@media (min-width:200ex){#index .two-column{column-count:2}}@media (min-width:300ex){#index .two-column{column-count:3}}dl{margin-bottom:2em}dl dl:last-child{margin-bottom:4em}dd{margin:0 0 1em 3em}#header-classes + dl > dd{margin-bottom:3em}dd dd{margin-left:2em}dd p{margin:10px 0}.name{background:#eee;font-weight:bold;font-size:.85em;padding:5px 10px;display:inline-block;min-width:40%}.name:hover{background:#e0e0e0}dt:target .name{background:var(--highlight-color)}.name > span:first-child{white-space:nowrap}.name.class > span:nth-child(2){margin-left:.4em}.inherited{color:#999;border-left:5px solid #eee;padding-left:1em}.inheritance em{font-style:normal;font-weight:bold}.desc h2{font-weight:400;font-size:1.25em}.desc h3{font-size:1em}.desc dt code{background:inherit}.source summary,.git-link-div{color:#666;text-align:right;font-weight:400;font-size:.8em;text-transform:uppercase}.source summary > *{white-space:nowrap;cursor:pointer}.git-link{color:inherit;margin-left:1em}.source pre{max-height:500px;overflow:auto;margin:0}.source pre code{font-size:12px;overflow:visible}.hlist{list-style:none}.hlist li{display:inline}.hlist li:after{content:',\2002'}.hlist li:last-child:after{content:none}.hlist .hlist{display:inline;padding-left:1em}img{max-width:100%}td{padding:0 .5em}.admonition{padding:.1em .5em;margin-bottom:1em}.admonition-title{font-weight:bold}.admonition.note,.admonition.info,.admonition.important{background:#aef}.admonition.todo,.admonition.versionadded,.admonition.tip,.admonition.hint{background:#dfd}.admonition.warning,.admonition.versionchanged,.admonition.deprecated{background:#fd4}.admonition.error,.admonition.danger,.admonition.caution{background:lightpink}</style>
<style media="screen and (min-width: 700px)">@media screen and (min-width:700px){#sidebar{width:30%;height:100vh;overflow:auto;position:sticky;top:0}#content{width:70%;max-width:100ch;padding:3em 4em;border-left:1px solid #ddd}pre code{font-size:1em}.item .name{font-size:1em}main{display:flex;flex-direction:row-reverse;justify-content:flex-end}.toc ul ul,#index ul{padding-left:1.5em}.toc > ul > li{margin-top:.5em}}</style>
<style media="print">@media print{#sidebar h1{page-break-before:always}.source{display:none}}@media print{*{background:transparent !important;color:#000 !important;box-shadow:none !important;text-shadow:none !important}a[href]:after{content:" (" attr(href) ")";font-size:90%}a[href][title]:after{content:none}abbr[title]:after{content:" (" attr(title) ")"}.ir a:after,a[href^="javascript:"]:after,a[href^="#"]:after{content:""}pre,blockquote{border:1px solid #999;page-break-inside:avoid}thead{display:table-header-group}tr,img{page-break-inside:avoid}img{max-width:100% !important}@page{margin:0.5cm}p,h2,h3{orphans:3;widows:3}h1,h2,h3,h4,h5,h6{page-break-after:avoid}}</style>
<script defer src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.1.1/highlight.min.js" integrity="sha256-Uv3H6lx7dJmRfRvH8TH6kJD1TSK1aFcwgx+mdg3epi8=" crossorigin></script>
<script>window.addEventListener('DOMContentLoaded', () => hljs.initHighlighting())</script>
</head>
<body>
<main>
<article id="content">
<header>
<h1 class="title">Module <code>tinytroupe.agent.mental_faculty</code></h1>
</header>
<section id="section-intro">
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">from tinytroupe.agent import logger
from tinytroupe.agent.grounding import LocalFilesGroundingConnector, WebPagesGroundingConnector
from tinytroupe.utils import JsonSerializableRegistry
import tinytroupe.utils as utils

import tinytroupe.agent as agent

from typing import Callable
import textwrap  # to dedent strings

#######################################################################################################################
# Mental faculties
#######################################################################################################################
    
class TinyMentalFaculty(JsonSerializableRegistry):
    &#34;&#34;&#34;
    Represents a mental faculty of an agent. Mental faculties are the cognitive abilities that an agent has.
    &#34;&#34;&#34;

    def __init__(self, name: str, requires_faculties: list=None) -&gt; None:
        &#34;&#34;&#34;
        Initializes the mental faculty.

        Args:
            name (str): The name of the mental faculty.
            requires_faculties (list): A list of mental faculties that this faculty requires to function properly.
        &#34;&#34;&#34;
        self.name = name
        
        if requires_faculties is None:
            self.requires_faculties = []
        else:
            self.requires_faculties = requires_faculties

    def __str__(self) -&gt; str:
        return f&#34;Mental Faculty: {self.name}&#34;
    
    def __eq__(self, other):
        if isinstance(other, TinyMentalFaculty):
            return self.name == other.name
        return False
    
    def process_action(self, agent, action: dict) -&gt; bool:
        &#34;&#34;&#34;
        Processes an action related to this faculty.

        Args:
            action (dict): The action to process.
        
        Returns:
            bool: True if the action was successfully processed, False otherwise.
        &#34;&#34;&#34;
        raise NotImplementedError(&#34;Subclasses must implement this method.&#34;)
    
    def actions_definitions_prompt(self) -&gt; str:
        &#34;&#34;&#34;
        Returns the prompt for defining a actions related to this faculty.
        &#34;&#34;&#34;
        raise NotImplementedError(&#34;Subclasses must implement this method.&#34;)

    def actions_constraints_prompt(self) -&gt; str:
        &#34;&#34;&#34;
        Returns the prompt for defining constraints on actions related to this faculty.
        &#34;&#34;&#34;
        raise NotImplementedError(&#34;Subclasses must implement this method.&#34;)


class CustomMentalFaculty(TinyMentalFaculty):
    &#34;&#34;&#34;
    Represents a custom mental faculty of an agent. Custom mental faculties are the cognitive abilities that an agent has
    and that are defined by the user just by specifying the actions that the faculty can perform or the constraints that
    the faculty introduces. Constraints might be related to the actions that the faculty can perform or be independent,
    more general constraints that the agent must follow.
    &#34;&#34;&#34;

    def __init__(self, name: str, requires_faculties: list = None,
                 actions_configs: dict = None, constraints: dict = None):
        &#34;&#34;&#34;
        Initializes the custom mental faculty.

        Args:
            name (str): The name of the mental faculty.
            requires_faculties (list): A list of mental faculties that this faculty requires to function properly. 
              Format is [&#34;faculty1&#34;, &#34;faculty2&#34;, ...]
            actions_configs (dict): A dictionary with the configuration of actions that this faculty can perform.
              Format is {&lt;action_name&gt;: {&#34;description&#34;: &lt;description&gt;, &#34;function&#34;: &lt;function&gt;}}
            constraints (dict): A list with the constraints introduced by this faculty.
              Format is [&lt;constraint1&gt;, &lt;constraint2&gt;, ...]
        &#34;&#34;&#34;

        super().__init__(name, requires_faculties)

        # {&lt;action_name&gt;: {&#34;description&#34;: &lt;description&gt;, &#34;function&#34;: &lt;function&gt;}}
        if actions_configs is None:
            self.actions_configs = {}
        else:
            self.actions_configs = actions_configs
        
        # [&lt;constraint1&gt;, &lt;constraint2&gt;, ...]
        if constraints is None:
            self.constraints = {}
        else:
            self.constraints = constraints
    
    def add_action(self, action_name: str, description: str, function: Callable=None):
        self.actions_configs[action_name] = {&#34;description&#34;: description, &#34;function&#34;: function}

    def add_actions(self, actions: dict):
        for action_name, action_config in actions.items():
            self.add_action(action_name, action_config[&#39;description&#39;], action_config[&#39;function&#39;])
    
    def add_action_constraint(self, constraint: str):
        self.constraints.append(constraint)
    
    def add_actions_constraints(self, constraints: list):
        for constraint in constraints:
            self.add_action_constraint(constraint)

    def process_action(self, agent, action: dict) -&gt; bool:
        logger.debug(f&#34;Processing action: {action}&#34;)

        action_type = action[&#39;type&#39;]
        if action_type in self.actions_configs:
            action_config = self.actions_configs[action_type]
            action_function = action_config.get(&#34;function&#34;, None)

            if action_function is not None:
                action_function(agent, action)
            
            # one way or another, the action was processed
            return True 
        
        else:
            return False
    
    def actions_definitions_prompt(self) -&gt; str:
        prompt = &#34;&#34;
        for action_name, action_config in self.actions_configs.items():
            prompt += f&#34;  - {action_name.upper()}: {action_config[&#39;description&#39;]}\n&#34;
        
        return prompt

    def actions_constraints_prompt(self) -&gt; str:
        prompt = &#34;&#34;
        for constraint in self.constraints:
            prompt += f&#34;  - {constraint}\n&#34;
        
        return prompt


class RecallFaculty(TinyMentalFaculty):

    def __init__(self):
        super().__init__(&#34;Memory Recall&#34;)
        

    def process_action(self, agent, action: dict) -&gt; bool:
        logger.debug(f&#34;Processing action: {action}&#34;)

        if action[&#39;type&#39;] == &#34;RECALL&#34; and action[&#39;content&#39;] is not None:
            content = action[&#39;content&#39;]

            semantic_memories = agent.retrieve_relevant_memories(relevance_target=content)

            logger.info(f&#34;Recalling information related to &#39;{content}&#39;. Found {len(semantic_memories)} relevant memories.&#34;)

            if len(semantic_memories) &gt; 0:
                # a string with each element in the list in a new line starting with a bullet point
                agent.think(&#34;I have remembered the following information from my semantic memory and will use it to guide me in my subsequent actions: \n&#34; + \
                        &#34;\n&#34;.join([f&#34;  - {item}&#34; for item in semantic_memories]))
            else:
                agent.think(f&#34;I can&#39;t remember anything additional about &#39;{content}&#39;. I&#39;ll just use what I already currently have in mind to proceed as well as I can.&#34;)
            
            return True
        
        elif action[&#39;type&#39;] == &#34;RECALL_WITH_FULL_SCAN&#34; and action[&#39;content&#39;] is not None:
            logger.debug(f&#34;Processing RECALL_WITH_FULL_SCAN action. Recalling and summarizing information related to &#39;{action[&#39;content&#39;]}&#39; with full scan.&#34;)

            content = action[&#39;content&#39;]
            memories_summary = agent.summarize_relevant_memories_via_full_scan(relevance_target=content)

            logger.debug(f&#34;Summary produced via full scan: {memories_summary}&#34;)

            if len(memories_summary) &gt; 0:
                # the summary is presented as a block of text
                agent.think(f&#34;I have remembered the following information from my semantic memory and will use it to guide me in my subsequent actions: \n \&#34;{memories_summary}\&#34;&#34;)                        
            else:
                agent.think(f&#34;I can&#39;t remember anything additional about &#39;{content}&#39;. I&#39;ll just use what I already currently have in mind to proceed as well as I can.&#34;)

            return True
        else:
            return False

    def actions_definitions_prompt(self) -&gt; str:
        prompt = \
            &#34;&#34;&#34;
              - RECALL: you can recall information that relates to specific topics from your memory. To do, you must specify a &#34;mental query&#34; to locate the desired memory. If the memory is found, it is brought to your conscience.
              - RECALL_WITH_FULL_SCAN: you can recall information from your memory in an exhaustive way, scanning all your memories. To do, you must specify a &#34;mental query&#34; that will be used to extract the relevant information from each memory. 
                                       All the information found will be brought to your conscience. This action is more expensive than RECALL, and is meant to be used when you want to ensure that you are not missing any relevant information.
            &#34;&#34;&#34;

        return textwrap.dedent(prompt)
    
    def actions_constraints_prompt(self) -&gt; str:
        prompt = \
          &#34;&#34;&#34;
            - Before concluding you don&#39;t know something or don&#39;t have access to some information, you **must** try to RECALL or RECALL_WITH_FULL_SCAN it from your memory.
            - If you you know precisely what you are looking for, you can use RECALL to retrieve it. If you are not sure, or if you want to ensure that you are not missing any relevant information, you should use RECALL_WITH_FULL_SCAN instead.
                * RECALL example: if you want to remember &#34;what are the expected inflation rates in Brazil&#34;, you will likely use RECALL with the &#34;Brazil inflation 2024&#34; mental query, as it is likely that the appropriate memory easily matches this query.
                * RECALL_WITH_FULL_SCAN example: if you want to remember &#34;what are the pros and cons of the product&#34;, you will likely use RECALL_WITH_FULL_SCAN with a more complex mental query like &#34;Looking for: product pros and cons. Reason: the agent is performing a product evaluation&#34;, 
                  as there is probably no clear memory that matches the related keywords, and you want to ensure that you are not missing any relevant information, so you scan all your memories for this information and explain why.
            - You try to RECALL information from your memory, so that you can have more relevant elements to think and talk about, whenever such an action would be likely
                to enrich the current interaction. To do so, you must specify able &#34;mental query&#34; that is related to the things you&#39;ve been thinking, listening and talking about.
                Example:
                ```
                &lt;THINK A&gt;
                &lt;RECALL / RECALL_WITH_FULL_SCAN B, which is something related to A&gt;
                &lt;THINK about A and B&gt;
                &lt;TALK about A and B&gt;
                DONE
                ```
            - You can try to RECALL_WITH_FULL_SCAN information from your memory when you want or are tasked with finding all relevant information about a topic, and you want to ensure that you are not missing any relevant information. 
              In other words, you &#34;try hard&#34; to remember.
               Example:
                ```
                &lt;LISTEN what are the main pros and cons of the product&gt;
                &lt;RECALL_WITH_FULL_SCAN Looking for: product pros and cons. Reason: the agent is performing a product evaluation.&gt;
                &lt;THINK about all the pros and cons found&gt;
                &lt;TALK about the pros and cons recalled&gt;
                DONE
                ```
            - If you RECALL:
                * you use a &#34;mental query&#34; that describe the elements you are looking for, you do not use a question. It is like a keyword-based search query.
                For example, instead of &#34;What are the symptoms of COVID-19?&#34;, you would use &#34;COVID-19 symptoms&#34;.
                * you use keywords likely to be found in the text you are looking for. For example, instead of &#34;Brazil economic outlook&#34;, you would use &#34;Brazil economy&#34;, &#34;Brazil GPD&#34;, &#34;Brazil inflation&#34;, etc.
            - If you RECALL_WITH_FULL_SCAN:
                * you use can use many types of &#34;mental queries&#34;: describe the elements you are looking for; a specific question; or any other specification that can extract the relevant information from any given memory. It is NOT like a keyword-based search query, 
                  but instead a specification of what is important to the agent at the moment.
                * regardless of the type of &#34;mental query&#34; you use, you **also** add information about the agent&#39;s context, mainly regarding the current tasks, so that the recall mechanism can understand **why** the information is needed and can therefore 
                  retrieve the most relevant information.
                * in particular, you don&#39;t need to use keywords likely to be found in the text you are looking for, but instead focus on the precise information need that you have at the moment plus the agent&#39;s context. For example,
                  if the agent has been evaluating a product and now wants to summarize the pros and cons of the product, you can use a more complex &#34;mental query&#34; like 
                  &#34;Looking for: product pros and cons. Reason: the agent was asked to perform a product evaluation and has examined many of the product features already.&#34;.
            - It may take several tries of RECALL to get the relevant information you need. If you don&#39;t find what you are looking for, you can try again with a **very** different &#34;mental query&#34;.
                Be creative: you can use synonyms, related concepts, or any other strategy you think might help you to find the information you need. Avoid using the same terms in different queries, as it is likely to return the same results. Whenever necessary, you should retry RECALL a couple of times before giving up the location of more information.
                Example:
                ```
                &lt;THINK something&gt;
                &lt;RECALL &#34;cat products&#34;&gt;
                &lt;THINK something&gt;
                &lt;RECALL &#34;feline artifacts&#34;&gt;
                &lt;THINK something&gt;
                &lt;RECALL &#34;pet store&#34;&gt;
                &lt;THINK something&gt;
                &lt;TALK something&gt;
                DONE
                ```
            - If you did not find what you needed using RECALL after a few attempts, you can try RECALL_WITH_FULL_SCAN instead.
            - You **may** interleave THINK and RECALL / RECALL_WITH_FULL_SCAN so that you can better reflect on the information you are trying to recall.
            - If you need information about a specific document, you **must** use CONSULT instead of RECALL / RECALL_WITH_FULL_SCAN. This is because RECALL / RECALL_WITH_FULL_SCAN **does not** allow you to select the specific document, and only brings small 
                relevant parts of variious documents - while CONSULT brings the precise document requested for your inspection, with its full content. 
                Example:
                ```
                LIST_DOCUMENTS
                &lt;CONSULT some document name&gt;
                &lt;THINK something about the retrieved document&gt;
                &lt;TALK something&gt;
                DONE
                ``` 
          &#34;&#34;&#34;

        return textwrap.dedent(prompt)
    

class FilesAndWebGroundingFaculty(TinyMentalFaculty):
    &#34;&#34;&#34;
    Allows the agent to access local files and web pages to ground its knowledge.
    &#34;&#34;&#34;


    def __init__(self, folders_paths: list=None, web_urls: list=None):
        super().__init__(&#34;Local Files and Web Grounding&#34;)

        self.local_files_grounding_connector = LocalFilesGroundingConnector(folders_paths=folders_paths)
        self.web_grounding_connector = WebPagesGroundingConnector(web_urls=web_urls)

    def process_action(self, agent, action: dict) -&gt; bool:
        if action[&#39;type&#39;] == &#34;CONSULT&#34; and action[&#39;content&#39;] is not None:
            target_name = action[&#39;content&#39;]

            results = []
            results.append(self.local_files_grounding_connector.retrieve_by_name(target_name))
            results.append(self.web_grounding_connector.retrieve_by_name(target_name))

            if len(results) &gt; 0:
                agent.think(f&#34;I have read the following document: \n{results}&#34;)
            else:
                agent.think(f&#34;I can&#39;t find any document with the name &#39;{target_name}&#39;.&#34;)
            
            return True
        
        elif action[&#39;type&#39;] == &#34;LIST_DOCUMENTS&#34; and action[&#39;content&#39;] is not None:
            available_names = []
            available_names += self.local_files_grounding_connector.list_sources()
            available_names += self.web_grounding_connector.list_sources()

            if len(available_names) &gt; 0:
                agent.think(f&#34;I have the following documents available to me: {available_names}&#34;)
            else:
                agent.think(f&#34;I don&#39;t have any documents available for inspection.&#34;)
            
            return True

        else:
            return False


    def actions_definitions_prompt(self) -&gt; str:
        prompt = \
            &#34;&#34;&#34;
            - LIST_DOCUMENTS: you can list the names of the documents you have access to, so that you can decide which to access, if any, to accomplish your goals. Documents is a generic term and includes any 
                kind of &#34;packaged&#34; information you can access, such as emails, files, chat messages, calendar events, etc. It also includes, in particular, web pages.
                The order of in which the documents are listed is not relevant.
            - CONSULT: you can retrieve and consult a specific document, so that you can access its content and accomplish your goals. To do so, you specify the name of the document you want to consult.
            &#34;&#34;&#34;

        return textwrap.dedent(prompt)
    
    def actions_constraints_prompt(self) -&gt; str:
        prompt = \
          &#34;&#34;&#34;
            - You are aware that you have documents available to you to help in your tasks. Even if you already have knowledge about a topic, you 
              should believe that the documents can provide you with additional information that can be useful to you.
            - If you want information that might be in documents, you first LIST_DOCUMENTS to see what is available and decide if you want to access any of them.
            - You LIST_DOCUMENTS when you suspect that relevant information might be in some document, but you are not sure which one.
            - You only CONSULT the relevant documents for your present goals and context. You should **not** CONSULT documents that are not relevant to the current situation.
              You use the name of the document to determine its relevance before accessing it.
            - If you need information about a specific document, you **must** use CONSULT instead of RECALL. This is because RECALL **does not** allow you to select the specific document, and only brings small 
                relevant parts of variious documents - while CONSULT brings the precise document requested for your inspection, with its full content. 
                Example:
                ```
                LIST_DOCUMENTS
                &lt;CONSULT some document name&gt;
                &lt;THINK something about the retrieved document&gt;
                &lt;TALK something&gt;
                DONE
                ``` 
            - If you need information from specific documents, you **always** CONSULT it, **never** RECALL it.   
            - You can only CONSULT few documents before issuing DONE. 
                Example:
                ```
                &lt;CONSULT some document name&gt;
                &lt;THINK something about the retrieved document&gt;
                &lt;TALK something&gt;
                &lt;CONSULT some document name&gt;
                &lt;THINK something about the retrieved document&gt;
                &lt;TALK something&gt;
                DONE
                ```
            - When deciding whether to use RECALL or CONSULT, you should consider whether you are looking for any information about some topic (use RECALL) or if you are looking for information from
                specific documents (use CONSULT). To know if you have potentially relevant documents available, use LIST_DOCUMENTS first.
          &#34;&#34;&#34;

        return textwrap.dedent(prompt)
    
    
class TinyToolUse(TinyMentalFaculty):
    &#34;&#34;&#34;
    Allows the agent to use tools to accomplish tasks. Tool usage is one of the most important cognitive skills
    humans and primates have as we know.
    &#34;&#34;&#34;

    def __init__(self, tools:list) -&gt; None:
        super().__init__(&#34;Tool Use&#34;)
    
        self.tools = tools
    
    def process_action(self, agent, action: dict) -&gt; bool:
        for tool in self.tools:
            if tool.process_action(agent, action):
                return True
        
        return False
    
    def actions_definitions_prompt(self) -&gt; str:
        # each tool should provide its own actions definitions prompt
        prompt = &#34;&#34;
        for tool in self.tools:
            prompt += tool.actions_definitions_prompt()
        
        return prompt
    
    def actions_constraints_prompt(self) -&gt; str:
        # each tool should provide its own actions constraints prompt
        prompt = &#34;&#34;
        for tool in self.tools:
            prompt += tool.actions_constraints_prompt()
        
        return prompt</code></pre>
</details>
</section>
<section>
</section>
<section>
</section>
<section>
</section>
<section>
<h2 class="section-title" id="header-classes">Classes</h2>
<dl>
<dt id="tinytroupe.agent.mental_faculty.CustomMentalFaculty"><code class="flex name class">
<span>class <span class="ident">CustomMentalFaculty</span></span>
<span>(</span><span>name: str, requires_faculties: list = None, actions_configs: dict = None, constraints: dict = None)</span>
</code></dt>
<dd>
<div class="desc"><p>Represents a custom mental faculty of an agent. Custom mental faculties are the cognitive abilities that an agent has
and that are defined by the user just by specifying the actions that the faculty can perform or the constraints that
the faculty introduces. Constraints might be related to the actions that the faculty can perform or be independent,
more general constraints that the agent must follow.</p>
<p>Initializes the custom mental faculty.</p>
<h2 id="args">Args</h2>
<dl>
<dt><strong><code>name</code></strong> :&ensp;<code>str</code></dt>
<dd>The name of the mental faculty.</dd>
<dt><strong><code>requires_faculties</code></strong> :&ensp;<code>list</code></dt>
<dd>A list of mental faculties that this faculty requires to function properly.
Format is ["faculty1", "faculty2", &hellip;]</dd>
<dt><strong><code>actions_configs</code></strong> :&ensp;<code>dict</code></dt>
<dd>A dictionary with the configuration of actions that this faculty can perform.
Format is {<action_name>: {"description": <description>, "function": <function>}}</dd>
<dt><strong><code>constraints</code></strong> :&ensp;<code>dict</code></dt>
<dd>A list with the constraints introduced by this faculty.
Format is [<constraint1>, <constraint2>, &hellip;]</dd>
</dl></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">class CustomMentalFaculty(TinyMentalFaculty):
    &#34;&#34;&#34;
    Represents a custom mental faculty of an agent. Custom mental faculties are the cognitive abilities that an agent has
    and that are defined by the user just by specifying the actions that the faculty can perform or the constraints that
    the faculty introduces. Constraints might be related to the actions that the faculty can perform or be independent,
    more general constraints that the agent must follow.
    &#34;&#34;&#34;

    def __init__(self, name: str, requires_faculties: list = None,
                 actions_configs: dict = None, constraints: dict = None):
        &#34;&#34;&#34;
        Initializes the custom mental faculty.

        Args:
            name (str): The name of the mental faculty.
            requires_faculties (list): A list of mental faculties that this faculty requires to function properly. 
              Format is [&#34;faculty1&#34;, &#34;faculty2&#34;, ...]
            actions_configs (dict): A dictionary with the configuration of actions that this faculty can perform.
              Format is {&lt;action_name&gt;: {&#34;description&#34;: &lt;description&gt;, &#34;function&#34;: &lt;function&gt;}}
            constraints (dict): A list with the constraints introduced by this faculty.
              Format is [&lt;constraint1&gt;, &lt;constraint2&gt;, ...]
        &#34;&#34;&#34;

        super().__init__(name, requires_faculties)

        # {&lt;action_name&gt;: {&#34;description&#34;: &lt;description&gt;, &#34;function&#34;: &lt;function&gt;}}
        if actions_configs is None:
            self.actions_configs = {}
        else:
            self.actions_configs = actions_configs
        
        # [&lt;constraint1&gt;, &lt;constraint2&gt;, ...]
        if constraints is None:
            self.constraints = {}
        else:
            self.constraints = constraints
    
    def add_action(self, action_name: str, description: str, function: Callable=None):
        self.actions_configs[action_name] = {&#34;description&#34;: description, &#34;function&#34;: function}

    def add_actions(self, actions: dict):
        for action_name, action_config in actions.items():
            self.add_action(action_name, action_config[&#39;description&#39;], action_config[&#39;function&#39;])
    
    def add_action_constraint(self, constraint: str):
        self.constraints.append(constraint)
    
    def add_actions_constraints(self, constraints: list):
        for constraint in constraints:
            self.add_action_constraint(constraint)

    def process_action(self, agent, action: dict) -&gt; bool:
        logger.debug(f&#34;Processing action: {action}&#34;)

        action_type = action[&#39;type&#39;]
        if action_type in self.actions_configs:
            action_config = self.actions_configs[action_type]
            action_function = action_config.get(&#34;function&#34;, None)

            if action_function is not None:
                action_function(agent, action)
            
            # one way or another, the action was processed
            return True 
        
        else:
            return False
    
    def actions_definitions_prompt(self) -&gt; str:
        prompt = &#34;&#34;
        for action_name, action_config in self.actions_configs.items():
            prompt += f&#34;  - {action_name.upper()}: {action_config[&#39;description&#39;]}\n&#34;
        
        return prompt

    def actions_constraints_prompt(self) -&gt; str:
        prompt = &#34;&#34;
        for constraint in self.constraints:
            prompt += f&#34;  - {constraint}\n&#34;
        
        return prompt</code></pre>
</details>
<h3>Ancestors</h3>
<ul class="hlist">
<li><a title="tinytroupe.agent.mental_faculty.TinyMentalFaculty" href="#tinytroupe.agent.mental_faculty.TinyMentalFaculty">TinyMentalFaculty</a></li>
<li><a title="tinytroupe.utils.json.JsonSerializableRegistry" href="../utils/json.html#tinytroupe.utils.json.JsonSerializableRegistry">JsonSerializableRegistry</a></li>
</ul>
<h3>Methods</h3>
<dl>
<dt id="tinytroupe.agent.mental_faculty.CustomMentalFaculty.add_action"><code class="name flex">
<span>def <span class="ident">add_action</span></span>(<span>self, action_name: str, description: str, function: Callable = None)</span>
</code></dt>
<dd>
<div class="desc"></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def add_action(self, action_name: str, description: str, function: Callable=None):
    self.actions_configs[action_name] = {&#34;description&#34;: description, &#34;function&#34;: function}</code></pre>
</details>
</dd>
<dt id="tinytroupe.agent.mental_faculty.CustomMentalFaculty.add_action_constraint"><code class="name flex">
<span>def <span class="ident">add_action_constraint</span></span>(<span>self, constraint: str)</span>
</code></dt>
<dd>
<div class="desc"></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def add_action_constraint(self, constraint: str):
    self.constraints.append(constraint)</code></pre>
</details>
</dd>
<dt id="tinytroupe.agent.mental_faculty.CustomMentalFaculty.add_actions"><code class="name flex">
<span>def <span class="ident">add_actions</span></span>(<span>self, actions: dict)</span>
</code></dt>
<dd>
<div class="desc"></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def add_actions(self, actions: dict):
    for action_name, action_config in actions.items():
        self.add_action(action_name, action_config[&#39;description&#39;], action_config[&#39;function&#39;])</code></pre>
</details>
</dd>
<dt id="tinytroupe.agent.mental_faculty.CustomMentalFaculty.add_actions_constraints"><code class="name flex">
<span>def <span class="ident">add_actions_constraints</span></span>(<span>self, constraints: list)</span>
</code></dt>
<dd>
<div class="desc"></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def add_actions_constraints(self, constraints: list):
    for constraint in constraints:
        self.add_action_constraint(constraint)</code></pre>
</details>
</dd>
</dl>
<h3>Inherited members</h3>
<ul class="hlist">
<li><code><b><a title="tinytroupe.agent.mental_faculty.TinyMentalFaculty" href="#tinytroupe.agent.mental_faculty.TinyMentalFaculty">TinyMentalFaculty</a></b></code>:
<ul class="hlist">
<li><code><a title="tinytroupe.agent.mental_faculty.TinyMentalFaculty.actions_constraints_prompt" href="#tinytroupe.agent.mental_faculty.TinyMentalFaculty.actions_constraints_prompt">actions_constraints_prompt</a></code></li>
<li><code><a title="tinytroupe.agent.mental_faculty.TinyMentalFaculty.actions_definitions_prompt" href="#tinytroupe.agent.mental_faculty.TinyMentalFaculty.actions_definitions_prompt">actions_definitions_prompt</a></code></li>
<li><code><a title="tinytroupe.agent.mental_faculty.TinyMentalFaculty.from_json" href="../utils/json.html#tinytroupe.utils.json.JsonSerializableRegistry.from_json">from_json</a></code></li>
<li><code><a title="tinytroupe.agent.mental_faculty.TinyMentalFaculty.process_action" href="#tinytroupe.agent.mental_faculty.TinyMentalFaculty.process_action">process_action</a></code></li>
<li><code><a title="tinytroupe.agent.mental_faculty.TinyMentalFaculty.to_json" href="../utils/json.html#tinytroupe.utils.json.JsonSerializableRegistry.to_json">to_json</a></code></li>
</ul>
</li>
</ul>
</dd>
<dt id="tinytroupe.agent.mental_faculty.FilesAndWebGroundingFaculty"><code class="flex name class">
<span>class <span class="ident">FilesAndWebGroundingFaculty</span></span>
<span>(</span><span>folders_paths: list = None, web_urls: list = None)</span>
</code></dt>
<dd>
<div class="desc"><p>Allows the agent to access local files and web pages to ground its knowledge.</p>
<p>Initializes the mental faculty.</p>
<h2 id="args">Args</h2>
<dl>
<dt><strong><code>name</code></strong> :&ensp;<code>str</code></dt>
<dd>The name of the mental faculty.</dd>
<dt><strong><code>requires_faculties</code></strong> :&ensp;<code>list</code></dt>
<dd>A list of mental faculties that this faculty requires to function properly.</dd>
</dl></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">class FilesAndWebGroundingFaculty(TinyMentalFaculty):
    &#34;&#34;&#34;
    Allows the agent to access local files and web pages to ground its knowledge.
    &#34;&#34;&#34;


    def __init__(self, folders_paths: list=None, web_urls: list=None):
        super().__init__(&#34;Local Files and Web Grounding&#34;)

        self.local_files_grounding_connector = LocalFilesGroundingConnector(folders_paths=folders_paths)
        self.web_grounding_connector = WebPagesGroundingConnector(web_urls=web_urls)

    def process_action(self, agent, action: dict) -&gt; bool:
        if action[&#39;type&#39;] == &#34;CONSULT&#34; and action[&#39;content&#39;] is not None:
            target_name = action[&#39;content&#39;]

            results = []
            results.append(self.local_files_grounding_connector.retrieve_by_name(target_name))
            results.append(self.web_grounding_connector.retrieve_by_name(target_name))

            if len(results) &gt; 0:
                agent.think(f&#34;I have read the following document: \n{results}&#34;)
            else:
                agent.think(f&#34;I can&#39;t find any document with the name &#39;{target_name}&#39;.&#34;)
            
            return True
        
        elif action[&#39;type&#39;] == &#34;LIST_DOCUMENTS&#34; and action[&#39;content&#39;] is not None:
            available_names = []
            available_names += self.local_files_grounding_connector.list_sources()
            available_names += self.web_grounding_connector.list_sources()

            if len(available_names) &gt; 0:
                agent.think(f&#34;I have the following documents available to me: {available_names}&#34;)
            else:
                agent.think(f&#34;I don&#39;t have any documents available for inspection.&#34;)
            
            return True

        else:
            return False


    def actions_definitions_prompt(self) -&gt; str:
        prompt = \
            &#34;&#34;&#34;
            - LIST_DOCUMENTS: you can list the names of the documents you have access to, so that you can decide which to access, if any, to accomplish your goals. Documents is a generic term and includes any 
                kind of &#34;packaged&#34; information you can access, such as emails, files, chat messages, calendar events, etc. It also includes, in particular, web pages.
                The order of in which the documents are listed is not relevant.
            - CONSULT: you can retrieve and consult a specific document, so that you can access its content and accomplish your goals. To do so, you specify the name of the document you want to consult.
            &#34;&#34;&#34;

        return textwrap.dedent(prompt)
    
    def actions_constraints_prompt(self) -&gt; str:
        prompt = \
          &#34;&#34;&#34;
            - You are aware that you have documents available to you to help in your tasks. Even if you already have knowledge about a topic, you 
              should believe that the documents can provide you with additional information that can be useful to you.
            - If you want information that might be in documents, you first LIST_DOCUMENTS to see what is available and decide if you want to access any of them.
            - You LIST_DOCUMENTS when you suspect that relevant information might be in some document, but you are not sure which one.
            - You only CONSULT the relevant documents for your present goals and context. You should **not** CONSULT documents that are not relevant to the current situation.
              You use the name of the document to determine its relevance before accessing it.
            - If you need information about a specific document, you **must** use CONSULT instead of RECALL. This is because RECALL **does not** allow you to select the specific document, and only brings small 
                relevant parts of variious documents - while CONSULT brings the precise document requested for your inspection, with its full content. 
                Example:
                ```
                LIST_DOCUMENTS
                &lt;CONSULT some document name&gt;
                &lt;THINK something about the retrieved document&gt;
                &lt;TALK something&gt;
                DONE
                ``` 
            - If you need information from specific documents, you **always** CONSULT it, **never** RECALL it.   
            - You can only CONSULT few documents before issuing DONE. 
                Example:
                ```
                &lt;CONSULT some document name&gt;
                &lt;THINK something about the retrieved document&gt;
                &lt;TALK something&gt;
                &lt;CONSULT some document name&gt;
                &lt;THINK something about the retrieved document&gt;
                &lt;TALK something&gt;
                DONE
                ```
            - When deciding whether to use RECALL or CONSULT, you should consider whether you are looking for any information about some topic (use RECALL) or if you are looking for information from
                specific documents (use CONSULT). To know if you have potentially relevant documents available, use LIST_DOCUMENTS first.
          &#34;&#34;&#34;

        return textwrap.dedent(prompt)</code></pre>
</details>
<h3>Ancestors</h3>
<ul class="hlist">
<li><a title="tinytroupe.agent.mental_faculty.TinyMentalFaculty" href="#tinytroupe.agent.mental_faculty.TinyMentalFaculty">TinyMentalFaculty</a></li>
<li><a title="tinytroupe.utils.json.JsonSerializableRegistry" href="../utils/json.html#tinytroupe.utils.json.JsonSerializableRegistry">JsonSerializableRegistry</a></li>
</ul>
<h3>Inherited members</h3>
<ul class="hlist">
<li><code><b><a title="tinytroupe.agent.mental_faculty.TinyMentalFaculty" href="#tinytroupe.agent.mental_faculty.TinyMentalFaculty">TinyMentalFaculty</a></b></code>:
<ul class="hlist">
<li><code><a title="tinytroupe.agent.mental_faculty.TinyMentalFaculty.actions_constraints_prompt" href="#tinytroupe.agent.mental_faculty.TinyMentalFaculty.actions_constraints_prompt">actions_constraints_prompt</a></code></li>
<li><code><a title="tinytroupe.agent.mental_faculty.TinyMentalFaculty.actions_definitions_prompt" href="#tinytroupe.agent.mental_faculty.TinyMentalFaculty.actions_definitions_prompt">actions_definitions_prompt</a></code></li>
<li><code><a title="tinytroupe.agent.mental_faculty.TinyMentalFaculty.from_json" href="../utils/json.html#tinytroupe.utils.json.JsonSerializableRegistry.from_json">from_json</a></code></li>
<li><code><a title="tinytroupe.agent.mental_faculty.TinyMentalFaculty.process_action" href="#tinytroupe.agent.mental_faculty.TinyMentalFaculty.process_action">process_action</a></code></li>
<li><code><a title="tinytroupe.agent.mental_faculty.TinyMentalFaculty.to_json" href="../utils/json.html#tinytroupe.utils.json.JsonSerializableRegistry.to_json">to_json</a></code></li>
</ul>
</li>
</ul>
</dd>
<dt id="tinytroupe.agent.mental_faculty.RecallFaculty"><code class="flex name class">
<span>class <span class="ident">RecallFaculty</span></span>
</code></dt>
<dd>
<div class="desc"><p>Represents a mental faculty of an agent. Mental faculties are the cognitive abilities that an agent has.</p>
<p>Initializes the mental faculty.</p>
<h2 id="args">Args</h2>
<dl>
<dt><strong><code>name</code></strong> :&ensp;<code>str</code></dt>
<dd>The name of the mental faculty.</dd>
<dt><strong><code>requires_faculties</code></strong> :&ensp;<code>list</code></dt>
<dd>A list of mental faculties that this faculty requires to function properly.</dd>
</dl></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">class RecallFaculty(TinyMentalFaculty):

    def __init__(self):
        super().__init__(&#34;Memory Recall&#34;)
        

    def process_action(self, agent, action: dict) -&gt; bool:
        logger.debug(f&#34;Processing action: {action}&#34;)

        if action[&#39;type&#39;] == &#34;RECALL&#34; and action[&#39;content&#39;] is not None:
            content = action[&#39;content&#39;]

            semantic_memories = agent.retrieve_relevant_memories(relevance_target=content)

            logger.info(f&#34;Recalling information related to &#39;{content}&#39;. Found {len(semantic_memories)} relevant memories.&#34;)

            if len(semantic_memories) &gt; 0:
                # a string with each element in the list in a new line starting with a bullet point
                agent.think(&#34;I have remembered the following information from my semantic memory and will use it to guide me in my subsequent actions: \n&#34; + \
                        &#34;\n&#34;.join([f&#34;  - {item}&#34; for item in semantic_memories]))
            else:
                agent.think(f&#34;I can&#39;t remember anything additional about &#39;{content}&#39;. I&#39;ll just use what I already currently have in mind to proceed as well as I can.&#34;)
            
            return True
        
        elif action[&#39;type&#39;] == &#34;RECALL_WITH_FULL_SCAN&#34; and action[&#39;content&#39;] is not None:
            logger.debug(f&#34;Processing RECALL_WITH_FULL_SCAN action. Recalling and summarizing information related to &#39;{action[&#39;content&#39;]}&#39; with full scan.&#34;)

            content = action[&#39;content&#39;]
            memories_summary = agent.summarize_relevant_memories_via_full_scan(relevance_target=content)

            logger.debug(f&#34;Summary produced via full scan: {memories_summary}&#34;)

            if len(memories_summary) &gt; 0:
                # the summary is presented as a block of text
                agent.think(f&#34;I have remembered the following information from my semantic memory and will use it to guide me in my subsequent actions: \n \&#34;{memories_summary}\&#34;&#34;)                        
            else:
                agent.think(f&#34;I can&#39;t remember anything additional about &#39;{content}&#39;. I&#39;ll just use what I already currently have in mind to proceed as well as I can.&#34;)

            return True
        else:
            return False

    def actions_definitions_prompt(self) -&gt; str:
        prompt = \
            &#34;&#34;&#34;
              - RECALL: you can recall information that relates to specific topics from your memory. To do, you must specify a &#34;mental query&#34; to locate the desired memory. If the memory is found, it is brought to your conscience.
              - RECALL_WITH_FULL_SCAN: you can recall information from your memory in an exhaustive way, scanning all your memories. To do, you must specify a &#34;mental query&#34; that will be used to extract the relevant information from each memory. 
                                       All the information found will be brought to your conscience. This action is more expensive than RECALL, and is meant to be used when you want to ensure that you are not missing any relevant information.
            &#34;&#34;&#34;

        return textwrap.dedent(prompt)
    
    def actions_constraints_prompt(self) -&gt; str:
        prompt = \
          &#34;&#34;&#34;
            - Before concluding you don&#39;t know something or don&#39;t have access to some information, you **must** try to RECALL or RECALL_WITH_FULL_SCAN it from your memory.
            - If you you know precisely what you are looking for, you can use RECALL to retrieve it. If you are not sure, or if you want to ensure that you are not missing any relevant information, you should use RECALL_WITH_FULL_SCAN instead.
                * RECALL example: if you want to remember &#34;what are the expected inflation rates in Brazil&#34;, you will likely use RECALL with the &#34;Brazil inflation 2024&#34; mental query, as it is likely that the appropriate memory easily matches this query.
                * RECALL_WITH_FULL_SCAN example: if you want to remember &#34;what are the pros and cons of the product&#34;, you will likely use RECALL_WITH_FULL_SCAN with a more complex mental query like &#34;Looking for: product pros and cons. Reason: the agent is performing a product evaluation&#34;, 
                  as there is probably no clear memory that matches the related keywords, and you want to ensure that you are not missing any relevant information, so you scan all your memories for this information and explain why.
            - You try to RECALL information from your memory, so that you can have more relevant elements to think and talk about, whenever such an action would be likely
                to enrich the current interaction. To do so, you must specify able &#34;mental query&#34; that is related to the things you&#39;ve been thinking, listening and talking about.
                Example:
                ```
                &lt;THINK A&gt;
                &lt;RECALL / RECALL_WITH_FULL_SCAN B, which is something related to A&gt;
                &lt;THINK about A and B&gt;
                &lt;TALK about A and B&gt;
                DONE
                ```
            - You can try to RECALL_WITH_FULL_SCAN information from your memory when you want or are tasked with finding all relevant information about a topic, and you want to ensure that you are not missing any relevant information. 
              In other words, you &#34;try hard&#34; to remember.
               Example:
                ```
                &lt;LISTEN what are the main pros and cons of the product&gt;
                &lt;RECALL_WITH_FULL_SCAN Looking for: product pros and cons. Reason: the agent is performing a product evaluation.&gt;
                &lt;THINK about all the pros and cons found&gt;
                &lt;TALK about the pros and cons recalled&gt;
                DONE
                ```
            - If you RECALL:
                * you use a &#34;mental query&#34; that describe the elements you are looking for, you do not use a question. It is like a keyword-based search query.
                For example, instead of &#34;What are the symptoms of COVID-19?&#34;, you would use &#34;COVID-19 symptoms&#34;.
                * you use keywords likely to be found in the text you are looking for. For example, instead of &#34;Brazil economic outlook&#34;, you would use &#34;Brazil economy&#34;, &#34;Brazil GPD&#34;, &#34;Brazil inflation&#34;, etc.
            - If you RECALL_WITH_FULL_SCAN:
                * you use can use many types of &#34;mental queries&#34;: describe the elements you are looking for; a specific question; or any other specification that can extract the relevant information from any given memory. It is NOT like a keyword-based search query, 
                  but instead a specification of what is important to the agent at the moment.
                * regardless of the type of &#34;mental query&#34; you use, you **also** add information about the agent&#39;s context, mainly regarding the current tasks, so that the recall mechanism can understand **why** the information is needed and can therefore 
                  retrieve the most relevant information.
                * in particular, you don&#39;t need to use keywords likely to be found in the text you are looking for, but instead focus on the precise information need that you have at the moment plus the agent&#39;s context. For example,
                  if the agent has been evaluating a product and now wants to summarize the pros and cons of the product, you can use a more complex &#34;mental query&#34; like 
                  &#34;Looking for: product pros and cons. Reason: the agent was asked to perform a product evaluation and has examined many of the product features already.&#34;.
            - It may take several tries of RECALL to get the relevant information you need. If you don&#39;t find what you are looking for, you can try again with a **very** different &#34;mental query&#34;.
                Be creative: you can use synonyms, related concepts, or any other strategy you think might help you to find the information you need. Avoid using the same terms in different queries, as it is likely to return the same results. Whenever necessary, you should retry RECALL a couple of times before giving up the location of more information.
                Example:
                ```
                &lt;THINK something&gt;
                &lt;RECALL &#34;cat products&#34;&gt;
                &lt;THINK something&gt;
                &lt;RECALL &#34;feline artifacts&#34;&gt;
                &lt;THINK something&gt;
                &lt;RECALL &#34;pet store&#34;&gt;
                &lt;THINK something&gt;
                &lt;TALK something&gt;
                DONE
                ```
            - If you did not find what you needed using RECALL after a few attempts, you can try RECALL_WITH_FULL_SCAN instead.
            - You **may** interleave THINK and RECALL / RECALL_WITH_FULL_SCAN so that you can better reflect on the information you are trying to recall.
            - If you need information about a specific document, you **must** use CONSULT instead of RECALL / RECALL_WITH_FULL_SCAN. This is because RECALL / RECALL_WITH_FULL_SCAN **does not** allow you to select the specific document, and only brings small 
                relevant parts of variious documents - while CONSULT brings the precise document requested for your inspection, with its full content. 
                Example:
                ```
                LIST_DOCUMENTS
                &lt;CONSULT some document name&gt;
                &lt;THINK something about the retrieved document&gt;
                &lt;TALK something&gt;
                DONE
                ``` 
          &#34;&#34;&#34;

        return textwrap.dedent(prompt)</code></pre>
</details>
<h3>Ancestors</h3>
<ul class="hlist">
<li><a title="tinytroupe.agent.mental_faculty.TinyMentalFaculty" href="#tinytroupe.agent.mental_faculty.TinyMentalFaculty">TinyMentalFaculty</a></li>
<li><a title="tinytroupe.utils.json.JsonSerializableRegistry" href="../utils/json.html#tinytroupe.utils.json.JsonSerializableRegistry">JsonSerializableRegistry</a></li>
</ul>
<h3>Inherited members</h3>
<ul class="hlist">
<li><code><b><a title="tinytroupe.agent.mental_faculty.TinyMentalFaculty" href="#tinytroupe.agent.mental_faculty.TinyMentalFaculty">TinyMentalFaculty</a></b></code>:
<ul class="hlist">
<li><code><a title="tinytroupe.agent.mental_faculty.TinyMentalFaculty.actions_constraints_prompt" href="#tinytroupe.agent.mental_faculty.TinyMentalFaculty.actions_constraints_prompt">actions_constraints_prompt</a></code></li>
<li><code><a title="tinytroupe.agent.mental_faculty.TinyMentalFaculty.actions_definitions_prompt" href="#tinytroupe.agent.mental_faculty.TinyMentalFaculty.actions_definitions_prompt">actions_definitions_prompt</a></code></li>
<li><code><a title="tinytroupe.agent.mental_faculty.TinyMentalFaculty.from_json" href="../utils/json.html#tinytroupe.utils.json.JsonSerializableRegistry.from_json">from_json</a></code></li>
<li><code><a title="tinytroupe.agent.mental_faculty.TinyMentalFaculty.process_action" href="#tinytroupe.agent.mental_faculty.TinyMentalFaculty.process_action">process_action</a></code></li>
<li><code><a title="tinytroupe.agent.mental_faculty.TinyMentalFaculty.to_json" href="../utils/json.html#tinytroupe.utils.json.JsonSerializableRegistry.to_json">to_json</a></code></li>
</ul>
</li>
</ul>
</dd>
<dt id="tinytroupe.agent.mental_faculty.TinyMentalFaculty"><code class="flex name class">
<span>class <span class="ident">TinyMentalFaculty</span></span>
<span>(</span><span>name: str, requires_faculties: list = None)</span>
</code></dt>
<dd>
<div class="desc"><p>Represents a mental faculty of an agent. Mental faculties are the cognitive abilities that an agent has.</p>
<p>Initializes the mental faculty.</p>
<h2 id="args">Args</h2>
<dl>
<dt><strong><code>name</code></strong> :&ensp;<code>str</code></dt>
<dd>The name of the mental faculty.</dd>
<dt><strong><code>requires_faculties</code></strong> :&ensp;<code>list</code></dt>
<dd>A list of mental faculties that this faculty requires to function properly.</dd>
</dl></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">class TinyMentalFaculty(JsonSerializableRegistry):
    &#34;&#34;&#34;
    Represents a mental faculty of an agent. Mental faculties are the cognitive abilities that an agent has.
    &#34;&#34;&#34;

    def __init__(self, name: str, requires_faculties: list=None) -&gt; None:
        &#34;&#34;&#34;
        Initializes the mental faculty.

        Args:
            name (str): The name of the mental faculty.
            requires_faculties (list): A list of mental faculties that this faculty requires to function properly.
        &#34;&#34;&#34;
        self.name = name
        
        if requires_faculties is None:
            self.requires_faculties = []
        else:
            self.requires_faculties = requires_faculties

    def __str__(self) -&gt; str:
        return f&#34;Mental Faculty: {self.name}&#34;
    
    def __eq__(self, other):
        if isinstance(other, TinyMentalFaculty):
            return self.name == other.name
        return False
    
    def process_action(self, agent, action: dict) -&gt; bool:
        &#34;&#34;&#34;
        Processes an action related to this faculty.

        Args:
            action (dict): The action to process.
        
        Returns:
            bool: True if the action was successfully processed, False otherwise.
        &#34;&#34;&#34;
        raise NotImplementedError(&#34;Subclasses must implement this method.&#34;)
    
    def actions_definitions_prompt(self) -&gt; str:
        &#34;&#34;&#34;
        Returns the prompt for defining a actions related to this faculty.
        &#34;&#34;&#34;
        raise NotImplementedError(&#34;Subclasses must implement this method.&#34;)

    def actions_constraints_prompt(self) -&gt; str:
        &#34;&#34;&#34;
        Returns the prompt for defining constraints on actions related to this faculty.
        &#34;&#34;&#34;
        raise NotImplementedError(&#34;Subclasses must implement this method.&#34;)</code></pre>
</details>
<h3>Ancestors</h3>
<ul class="hlist">
<li><a title="tinytroupe.utils.json.JsonSerializableRegistry" href="../utils/json.html#tinytroupe.utils.json.JsonSerializableRegistry">JsonSerializableRegistry</a></li>
</ul>
<h3>Subclasses</h3>
<ul class="hlist">
<li><a title="tinytroupe.agent.memory.TinyMemory" href="memory.html#tinytroupe.agent.memory.TinyMemory">TinyMemory</a></li>
<li><a title="tinytroupe.agent.mental_faculty.CustomMentalFaculty" href="#tinytroupe.agent.mental_faculty.CustomMentalFaculty">CustomMentalFaculty</a></li>
<li><a title="tinytroupe.agent.mental_faculty.FilesAndWebGroundingFaculty" href="#tinytroupe.agent.mental_faculty.FilesAndWebGroundingFaculty">FilesAndWebGroundingFaculty</a></li>
<li><a title="tinytroupe.agent.mental_faculty.RecallFaculty" href="#tinytroupe.agent.mental_faculty.RecallFaculty">RecallFaculty</a></li>
<li><a title="tinytroupe.agent.mental_faculty.TinyToolUse" href="#tinytroupe.agent.mental_faculty.TinyToolUse">TinyToolUse</a></li>
</ul>
<h3>Methods</h3>
<dl>
<dt id="tinytroupe.agent.mental_faculty.TinyMentalFaculty.actions_constraints_prompt"><code class="name flex">
<span>def <span class="ident">actions_constraints_prompt</span></span>(<span>self) ‑> str</span>
</code></dt>
<dd>
<div class="desc"><p>Returns the prompt for defining constraints on actions related to this faculty.</p></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def actions_constraints_prompt(self) -&gt; str:
    &#34;&#34;&#34;
    Returns the prompt for defining constraints on actions related to this faculty.
    &#34;&#34;&#34;
    raise NotImplementedError(&#34;Subclasses must implement this method.&#34;)</code></pre>
</details>
</dd>
<dt id="tinytroupe.agent.mental_faculty.TinyMentalFaculty.actions_definitions_prompt"><code class="name flex">
<span>def <span class="ident">actions_definitions_prompt</span></span>(<span>self) ‑> str</span>
</code></dt>
<dd>
<div class="desc"><p>Returns the prompt for defining a actions related to this faculty.</p></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def actions_definitions_prompt(self) -&gt; str:
    &#34;&#34;&#34;
    Returns the prompt for defining a actions related to this faculty.
    &#34;&#34;&#34;
    raise NotImplementedError(&#34;Subclasses must implement this method.&#34;)</code></pre>
</details>
</dd>
<dt id="tinytroupe.agent.mental_faculty.TinyMentalFaculty.process_action"><code class="name flex">
<span>def <span class="ident">process_action</span></span>(<span>self, agent, action: dict) ‑> bool</span>
</code></dt>
<dd>
<div class="desc"><p>Processes an action related to this faculty.</p>
<h2 id="args">Args</h2>
<dl>
<dt><strong><code>action</code></strong> :&ensp;<code>dict</code></dt>
<dd>The action to process.</dd>
</dl>
<h2 id="returns">Returns</h2>
<dl>
<dt><code>bool</code></dt>
<dd>True if the action was successfully processed, False otherwise.</dd>
</dl></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def process_action(self, agent, action: dict) -&gt; bool:
    &#34;&#34;&#34;
    Processes an action related to this faculty.

    Args:
        action (dict): The action to process.
    
    Returns:
        bool: True if the action was successfully processed, False otherwise.
    &#34;&#34;&#34;
    raise NotImplementedError(&#34;Subclasses must implement this method.&#34;)</code></pre>
</details>
</dd>
</dl>
<h3>Inherited members</h3>
<ul class="hlist">
<li><code><b><a title="tinytroupe.utils.json.JsonSerializableRegistry" href="../utils/json.html#tinytroupe.utils.json.JsonSerializableRegistry">JsonSerializableRegistry</a></b></code>:
<ul class="hlist">
<li><code><a title="tinytroupe.utils.json.JsonSerializableRegistry.from_json" href="../utils/json.html#tinytroupe.utils.json.JsonSerializableRegistry.from_json">from_json</a></code></li>
<li><code><a title="tinytroupe.utils.json.JsonSerializableRegistry.to_json" href="../utils/json.html#tinytroupe.utils.json.JsonSerializableRegistry.to_json">to_json</a></code></li>
</ul>
</li>
</ul>
</dd>
<dt id="tinytroupe.agent.mental_faculty.TinyToolUse"><code class="flex name class">
<span>class <span class="ident">TinyToolUse</span></span>
<span>(</span><span>tools: list)</span>
</code></dt>
<dd>
<div class="desc"><p>Allows the agent to use tools to accomplish tasks. Tool usage is one of the most important cognitive skills
humans and primates have as we know.</p>
<p>Initializes the mental faculty.</p>
<h2 id="args">Args</h2>
<dl>
<dt><strong><code>name</code></strong> :&ensp;<code>str</code></dt>
<dd>The name of the mental faculty.</dd>
<dt><strong><code>requires_faculties</code></strong> :&ensp;<code>list</code></dt>
<dd>A list of mental faculties that this faculty requires to function properly.</dd>
</dl></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">class TinyToolUse(TinyMentalFaculty):
    &#34;&#34;&#34;
    Allows the agent to use tools to accomplish tasks. Tool usage is one of the most important cognitive skills
    humans and primates have as we know.
    &#34;&#34;&#34;

    def __init__(self, tools:list) -&gt; None:
        super().__init__(&#34;Tool Use&#34;)
    
        self.tools = tools
    
    def process_action(self, agent, action: dict) -&gt; bool:
        for tool in self.tools:
            if tool.process_action(agent, action):
                return True
        
        return False
    
    def actions_definitions_prompt(self) -&gt; str:
        # each tool should provide its own actions definitions prompt
        prompt = &#34;&#34;
        for tool in self.tools:
            prompt += tool.actions_definitions_prompt()
        
        return prompt
    
    def actions_constraints_prompt(self) -&gt; str:
        # each tool should provide its own actions constraints prompt
        prompt = &#34;&#34;
        for tool in self.tools:
            prompt += tool.actions_constraints_prompt()
        
        return prompt</code></pre>
</details>
<h3>Ancestors</h3>
<ul class="hlist">
<li><a title="tinytroupe.agent.mental_faculty.TinyMentalFaculty" href="#tinytroupe.agent.mental_faculty.TinyMentalFaculty">TinyMentalFaculty</a></li>
<li><a title="tinytroupe.utils.json.JsonSerializableRegistry" href="../utils/json.html#tinytroupe.utils.json.JsonSerializableRegistry">JsonSerializableRegistry</a></li>
</ul>
<h3>Inherited members</h3>
<ul class="hlist">
<li><code><b><a title="tinytroupe.agent.mental_faculty.TinyMentalFaculty" href="#tinytroupe.agent.mental_faculty.TinyMentalFaculty">TinyMentalFaculty</a></b></code>:
<ul class="hlist">
<li><code><a title="tinytroupe.agent.mental_faculty.TinyMentalFaculty.actions_constraints_prompt" href="#tinytroupe.agent.mental_faculty.TinyMentalFaculty.actions_constraints_prompt">actions_constraints_prompt</a></code></li>
<li><code><a title="tinytroupe.agent.mental_faculty.TinyMentalFaculty.actions_definitions_prompt" href="#tinytroupe.agent.mental_faculty.TinyMentalFaculty.actions_definitions_prompt">actions_definitions_prompt</a></code></li>
<li><code><a title="tinytroupe.agent.mental_faculty.TinyMentalFaculty.from_json" href="../utils/json.html#tinytroupe.utils.json.JsonSerializableRegistry.from_json">from_json</a></code></li>
<li><code><a title="tinytroupe.agent.mental_faculty.TinyMentalFaculty.process_action" href="#tinytroupe.agent.mental_faculty.TinyMentalFaculty.process_action">process_action</a></code></li>
<li><code><a title="tinytroupe.agent.mental_faculty.TinyMentalFaculty.to_json" href="../utils/json.html#tinytroupe.utils.json.JsonSerializableRegistry.to_json">to_json</a></code></li>
</ul>
</li>
</ul>
</dd>
</dl>
</section>
</article>
<nav id="sidebar">
<h1>Index</h1>
<div class="toc">
<ul></ul>
</div>
<ul id="index">
<li><h3>Super-module</h3>
<ul>
<li><code><a title="tinytroupe.agent" href="index.html">tinytroupe.agent</a></code></li>
</ul>
</li>
<li><h3><a href="#header-classes">Classes</a></h3>
<ul>
<li>
<h4><code><a title="tinytroupe.agent.mental_faculty.CustomMentalFaculty" href="#tinytroupe.agent.mental_faculty.CustomMentalFaculty">CustomMentalFaculty</a></code></h4>
<ul class="">
<li><code><a title="tinytroupe.agent.mental_faculty.CustomMentalFaculty.add_action" href="#tinytroupe.agent.mental_faculty.CustomMentalFaculty.add_action">add_action</a></code></li>
<li><code><a title="tinytroupe.agent.mental_faculty.CustomMentalFaculty.add_action_constraint" href="#tinytroupe.agent.mental_faculty.CustomMentalFaculty.add_action_constraint">add_action_constraint</a></code></li>
<li><code><a title="tinytroupe.agent.mental_faculty.CustomMentalFaculty.add_actions" href="#tinytroupe.agent.mental_faculty.CustomMentalFaculty.add_actions">add_actions</a></code></li>
<li><code><a title="tinytroupe.agent.mental_faculty.CustomMentalFaculty.add_actions_constraints" href="#tinytroupe.agent.mental_faculty.CustomMentalFaculty.add_actions_constraints">add_actions_constraints</a></code></li>
</ul>
</li>
<li>
<h4><code><a title="tinytroupe.agent.mental_faculty.FilesAndWebGroundingFaculty" href="#tinytroupe.agent.mental_faculty.FilesAndWebGroundingFaculty">FilesAndWebGroundingFaculty</a></code></h4>
</li>
<li>
<h4><code><a title="tinytroupe.agent.mental_faculty.RecallFaculty" href="#tinytroupe.agent.mental_faculty.RecallFaculty">RecallFaculty</a></code></h4>
</li>
<li>
<h4><code><a title="tinytroupe.agent.mental_faculty.TinyMentalFaculty" href="#tinytroupe.agent.mental_faculty.TinyMentalFaculty">TinyMentalFaculty</a></code></h4>
<ul class="">
<li><code><a title="tinytroupe.agent.mental_faculty.TinyMentalFaculty.actions_constraints_prompt" href="#tinytroupe.agent.mental_faculty.TinyMentalFaculty.actions_constraints_prompt">actions_constraints_prompt</a></code></li>
<li><code><a title="tinytroupe.agent.mental_faculty.TinyMentalFaculty.actions_definitions_prompt" href="#tinytroupe.agent.mental_faculty.TinyMentalFaculty.actions_definitions_prompt">actions_definitions_prompt</a></code></li>
<li><code><a title="tinytroupe.agent.mental_faculty.TinyMentalFaculty.process_action" href="#tinytroupe.agent.mental_faculty.TinyMentalFaculty.process_action">process_action</a></code></li>
</ul>
</li>
<li>
<h4><code><a title="tinytroupe.agent.mental_faculty.TinyToolUse" href="#tinytroupe.agent.mental_faculty.TinyToolUse">TinyToolUse</a></code></h4>
</li>
</ul>
</li>
</ul>
</nav>
</main>
<footer id="footer">
<p>Generated by <a href="https://pdoc3.github.io/pdoc" title="pdoc: Python API documentation generator"><cite>pdoc</cite> 0.10.0</a>.</p>
</footer>
</body>
</html>