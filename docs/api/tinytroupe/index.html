<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1, minimum-scale=1" />
<meta name="generator" content="pdoc 0.10.0" />
<title>tinytroupe API documentation</title>
<meta name="description" content="" />
<link rel="preload stylesheet" as="style" href="https://cdnjs.cloudflare.com/ajax/libs/10up-sanitize.css/11.0.1/sanitize.min.css" integrity="sha256-PK9q560IAAa6WVRRh76LtCaI8pjTJ2z11v0miyNNjrs=" crossorigin>
<link rel="preload stylesheet" as="style" href="https://cdnjs.cloudflare.com/ajax/libs/10up-sanitize.css/11.0.1/typography.min.css" integrity="sha256-7l/o7C8jubJiy74VsKTidCy1yBkRtiUGbVkYBylBqUg=" crossorigin>
<link rel="stylesheet preload" as="style" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.1.1/styles/github.min.css" crossorigin>
<style>:root{--highlight-color:#fe9}.flex{display:flex !important}body{line-height:1.5em}#content{padding:20px}#sidebar{padding:30px;overflow:hidden}#sidebar > *:last-child{margin-bottom:2cm}.http-server-breadcrumbs{font-size:130%;margin:0 0 15px 0}#footer{font-size:.75em;padding:5px 30px;border-top:1px solid #ddd;text-align:right}#footer p{margin:0 0 0 1em;display:inline-block}#footer p:last-child{margin-right:30px}h1,h2,h3,h4,h5{font-weight:300}h1{font-size:2.5em;line-height:1.1em}h2{font-size:1.75em;margin:1em 0 .50em 0}h3{font-size:1.4em;margin:25px 0 10px 0}h4{margin:0;font-size:105%}h1:target,h2:target,h3:target,h4:target,h5:target,h6:target{background:var(--highlight-color);padding:.2em 0}a{color:#058;text-decoration:none;transition:color .3s ease-in-out}a:hover{color:#e82}.title code{font-weight:bold}h2[id^="header-"]{margin-top:2em}.ident{color:#900}pre code{background:#f8f8f8;font-size:.8em;line-height:1.4em}code{background:#f2f2f1;padding:1px 4px;overflow-wrap:break-word}h1 code{background:transparent}pre{background:#f8f8f8;border:0;border-top:1px solid #ccc;border-bottom:1px solid #ccc;margin:1em 0;padding:1ex}#http-server-module-list{display:flex;flex-flow:column}#http-server-module-list div{display:flex}#http-server-module-list dt{min-width:10%}#http-server-module-list p{margin-top:0}.toc ul,#index{list-style-type:none;margin:0;padding:0}#index code{background:transparent}#index h3{border-bottom:1px solid #ddd}#index ul{padding:0}#index h4{margin-top:.6em;font-weight:bold}@media (min-width:200ex){#index .two-column{column-count:2}}@media (min-width:300ex){#index .two-column{column-count:3}}dl{margin-bottom:2em}dl dl:last-child{margin-bottom:4em}dd{margin:0 0 1em 3em}#header-classes + dl > dd{margin-bottom:3em}dd dd{margin-left:2em}dd p{margin:10px 0}.name{background:#eee;font-weight:bold;font-size:.85em;padding:5px 10px;display:inline-block;min-width:40%}.name:hover{background:#e0e0e0}dt:target .name{background:var(--highlight-color)}.name > span:first-child{white-space:nowrap}.name.class > span:nth-child(2){margin-left:.4em}.inherited{color:#999;border-left:5px solid #eee;padding-left:1em}.inheritance em{font-style:normal;font-weight:bold}.desc h2{font-weight:400;font-size:1.25em}.desc h3{font-size:1em}.desc dt code{background:inherit}.source summary,.git-link-div{color:#666;text-align:right;font-weight:400;font-size:.8em;text-transform:uppercase}.source summary > *{white-space:nowrap;cursor:pointer}.git-link{color:inherit;margin-left:1em}.source pre{max-height:500px;overflow:auto;margin:0}.source pre code{font-size:12px;overflow:visible}.hlist{list-style:none}.hlist li{display:inline}.hlist li:after{content:',\2002'}.hlist li:last-child:after{content:none}.hlist .hlist{display:inline;padding-left:1em}img{max-width:100%}td{padding:0 .5em}.admonition{padding:.1em .5em;margin-bottom:1em}.admonition-title{font-weight:bold}.admonition.note,.admonition.info,.admonition.important{background:#aef}.admonition.todo,.admonition.versionadded,.admonition.tip,.admonition.hint{background:#dfd}.admonition.warning,.admonition.versionchanged,.admonition.deprecated{background:#fd4}.admonition.error,.admonition.danger,.admonition.caution{background:lightpink}</style>
<style media="screen and (min-width: 700px)">@media screen and (min-width:700px){#sidebar{width:30%;height:100vh;overflow:auto;position:sticky;top:0}#content{width:70%;max-width:100ch;padding:3em 4em;border-left:1px solid #ddd}pre code{font-size:1em}.item .name{font-size:1em}main{display:flex;flex-direction:row-reverse;justify-content:flex-end}.toc ul ul,#index ul{padding-left:1.5em}.toc > ul > li{margin-top:.5em}}</style>
<style media="print">@media print{#sidebar h1{page-break-before:always}.source{display:none}}@media print{*{background:transparent !important;color:#000 !important;box-shadow:none !important;text-shadow:none !important}a[href]:after{content:" (" attr(href) ")";font-size:90%}a[href][title]:after{content:none}abbr[title]:after{content:" (" attr(title) ")"}.ir a:after,a[href^="javascript:"]:after,a[href^="#"]:after{content:""}pre,blockquote{border:1px solid #999;page-break-inside:avoid}thead{display:table-header-group}tr,img{page-break-inside:avoid}img{max-width:100% !important}@page{margin:0.5cm}p,h2,h3{orphans:3;widows:3}h1,h2,h3,h4,h5,h6{page-break-after:avoid}}</style>
<script defer src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.1.1/highlight.min.js" integrity="sha256-Uv3H6lx7dJmRfRvH8TH6kJD1TSK1aFcwgx+mdg3epi8=" crossorigin></script>
<script>window.addEventListener('DOMContentLoaded', () => hljs.initHighlighting())</script>
</head>
<body>
<main>
<article id="content">
<header>
<h1 class="title">Package <code>tinytroupe</code></h1>
</header>
<section id="section-intro">
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">import os
import logging
import configparser
import rich # for rich console output
import rich.jupyter

# add current path to sys.path
import sys
sys.path.append(&#39;.&#39;)
from tinytroupe import utils # now we can import our utils

# AI disclaimers
print(\
&#34;&#34;&#34;
!!!!
DISCLAIMER: TinyTroupe relies on Artificial Intelligence (AI) models to generate content. 
The AI models are not perfect and may produce inappropriate or inacurate results. 
For any serious or consequential use, please review the generated content before using it.
!!!!
&#34;&#34;&#34;)


###########################################################################
# Configuration Management System
###########################################################################
class ConfigManager:
    &#34;&#34;&#34;
    Manages configuration values with the ability to override defaults.
    Provides dynamic access to the latest config values.
    &#34;&#34;&#34;
    def __init__(self):
        self._config = {}
        self._initialize_from_config()
    
    def _initialize_from_config(self):
        &#34;&#34;&#34;Initialize default values from config file&#34;&#34;&#34;
        config = utils.read_config_file()
        
        self._config[&#34;model&#34;] = config[&#34;OpenAI&#34;].get(&#34;MODEL&#34;, &#34;gpt-4o&#34;)
        self._config[&#34;embedding_model&#34;] = config[&#34;OpenAI&#34;].get(&#34;EMBEDDING_MODEL&#34;, &#34;text-embedding-3-small&#34;)
        if config[&#34;OpenAI&#34;].get(&#34;API_TYPE&#34;) == &#34;azure&#34;:
            self._config[&#34;azure_embedding_model_api_version&#34;] = config[&#34;OpenAI&#34;].get(&#34;AZURE_EMBEDDING_MODEL_API_VERSION&#34;, &#34;2023-05-15&#34;)
        self._config[&#34;reasoning_model&#34;] = config[&#34;OpenAI&#34;].get(&#34;REASONING_MODEL&#34;, &#34;o3-mini&#34;)

        self._config[&#34;max_tokens&#34;] = int(config[&#34;OpenAI&#34;].get(&#34;MAX_TOKENS&#34;, &#34;1024&#34;))
        self._config[&#34;temperature&#34;] = float(config[&#34;OpenAI&#34;].get(&#34;TEMPERATURE&#34;, &#34;1.0&#34;))
        self._config[&#34;top_p&#34;] = int(config[&#34;OpenAI&#34;].get(&#34;TOP_P&#34;, &#34;0&#34;))
        self._config[&#34;frequency_penalty&#34;] = float(config[&#34;OpenAI&#34;].get(&#34;FREQ_PENALTY&#34;, &#34;0.0&#34;))
        self._config[&#34;presence_penalty&#34;] = float(
            config[&#34;OpenAI&#34;].get(&#34;PRESENCE_PENALTY&#34;, &#34;0.0&#34;))
        self._config[&#34;reasoning_effort&#34;] = config[&#34;OpenAI&#34;].get(&#34;REASONING_EFFORT&#34;, &#34;high&#34;)

        self._config[&#34;timeout&#34;] = float(config[&#34;OpenAI&#34;].get(&#34;TIMEOUT&#34;, &#34;30.0&#34;))
        self._config[&#34;max_attempts&#34;] = float(config[&#34;OpenAI&#34;].get(&#34;MAX_ATTEMPTS&#34;, &#34;0.0&#34;))
        self._config[&#34;waiting_time&#34;] = float(config[&#34;OpenAI&#34;].get(&#34;WAITING_TIME&#34;, &#34;1&#34;))
        self._config[&#34;exponential_backoff_factor&#34;] = float(config[&#34;OpenAI&#34;].get(&#34;EXPONENTIAL_BACKOFF_FACTOR&#34;, &#34;5&#34;))

        self._config[&#34;cache_api_calls&#34;] = config[&#34;OpenAI&#34;].getboolean(&#34;CACHE_API_CALLS&#34;, False)
        self._config[&#34;cache_file_name&#34;] = config[&#34;OpenAI&#34;].get(&#34;CACHE_FILE_NAME&#34;, &#34;openai_api_cache.pickle&#34;)

        self._config[&#34;max_content_display_length&#34;] = config[&#34;OpenAI&#34;].getint(&#34;MAX_CONTENT_DISPLAY_LENGTH&#34;, 1024)

        self._config[&#34;parallel_agent_actions&#34;] = config[&#34;Simulation&#34;].getboolean(&#34;PARALLEL_AGENT_ACTIONS&#34;, True)
        self._config[&#34;parallel_agent_generation&#34;] = config[&#34;Simulation&#34;].getboolean(&#34;PARALLEL_AGENT_GENERATION&#34;, True)

        self._config[&#34;enable_memory_consolidation&#34;] = config[&#34;Cognition&#34;].get(&#34;ENABLE_MEMORY_CONSOLIDATION&#34;, True)
        self._config[&#34;min_episode_length&#34;] = config[&#34;Cognition&#34;].getint(&#34;MIN_EPISODE_LENGTH&#34;, 30)
        self._config[&#34;max_episode_length&#34;] = config[&#34;Cognition&#34;].getint(&#34;MAX_EPISODE_LENGTH&#34;, 100)  
        self._config[&#34;episodic_memory_fixed_prefix_length&#34;] = config[&#34;Cognition&#34;].getint(&#34;EPISODIC_MEMORY_FIXED_PREFIX_LENGTH&#34;, 20)
        self._config[&#34;episodic_memory_lookback_length&#34;] = config[&#34;Cognition&#34;].getint(&#34;EPISODIC_MEMORY_LOOKBACK_LENGTH&#34;, 20)

        self._config[&#34;action_generator_max_attempts&#34;] = config[&#34;ActionGenerator&#34;].getint(&#34;MAX_ATTEMPTS&#34;, 2)
        self._config[&#34;action_generator_enable_quality_checks&#34;] = config[&#34;ActionGenerator&#34;].getboolean(&#34;ENABLE_QUALITY_CHECKS&#34;, False)
        self._config[&#34;action_generator_enable_regeneration&#34;] = config[&#34;ActionGenerator&#34;].getboolean(&#34;ENABLE_REGENERATION&#34;, False)
        self._config[&#34;action_generator_enable_direct_correction&#34;] = config[&#34;ActionGenerator&#34;].getboolean(&#34;ENABLE_DIRECT_CORRECTION&#34;, False)

        self._config[&#34;action_generator_enable_quality_check_for_persona_adherence&#34;] = config[&#34;ActionGenerator&#34;].getboolean(&#34;ENABLE_QUALITY_CHECK_FOR_PERSONA_ADHERENCE&#34;, False)
        self._config[&#34;action_generator_enable_quality_check_for_selfconsistency&#34;] = config[&#34;ActionGenerator&#34;].getboolean(&#34;ENABLE_QUALITY_CHECK_FOR_SELFCONSISTENCY&#34;, False)
        self._config[&#34;action_generator_enable_quality_check_for_fluency&#34;] = config[&#34;ActionGenerator&#34;].getboolean(&#34;ENABLE_QUALITY_CHECK_FOR_FLUENCY&#34;, False)
        self._config[&#34;action_generator_enable_quality_check_for_suitability&#34;] = config[&#34;ActionGenerator&#34;].getboolean(&#34;ENABLE_QUALITY_CHECK_FOR_SUITABILITY&#34;, False)
        self._config[&#34;action_generator_enable_quality_check_for_similarity&#34;] = config[&#34;ActionGenerator&#34;].getboolean(&#34;ENABLE_QUALITY_CHECK_FOR_SIMILARITY&#34;, False)

        self._config[&#34;action_generator_continue_on_failure&#34;] = config[&#34;ActionGenerator&#34;].getboolean(&#34;CONTINUE_ON_FAILURE&#34;, True)
        self._config[&#34;action_generator_quality_threshold&#34;] = config[&#34;ActionGenerator&#34;].getint(&#34;QUALITY_THRESHOLD&#34;, 2)
        
        self._raw_config = config
    
    def update(self, key, value):
        &#34;&#34;&#34;
        Update a configuration value.
        
        Args:
            key (str): The configuration key to update
            value: The new value to set
            
        Returns:
            None
        &#34;&#34;&#34;
        if key in self._config:
            self._config[key] = value
            logging.info(f&#34;Updated config: {key} = {value}&#34;)
        else:
            logging.warning(f&#34;Attempted to update unknown config key: {key}&#34;)
    
    def update_multiple(self, config_dict):
        &#34;&#34;&#34;
        Update multiple configuration values at once.
        
        Args:
            config_dict (dict): Dictionary of key-value pairs to update
            
        Returns:
            None
        &#34;&#34;&#34;
        for key, value in config_dict.items():
            self.update(key, value)
    
    def get(self, key, default=None):
        &#34;&#34;&#34;
        Get a configuration value.
        
        Args:
            key (str): The configuration key to retrieve
            default: The default value to return if key is not found
            
        Returns:
            The configuration value
        &#34;&#34;&#34;
        return self._config.get(key, default)
    
    def reset(self):
        &#34;&#34;&#34;Reset all configuration values to their original values from the config file.&#34;&#34;&#34;
        self._initialize_from_config()
        logging.info(&#34;All configuration values have been reset to defaults&#34;)
    
    def __getitem__(self, key):
        &#34;&#34;&#34;Allow dictionary-like access to configuration values.&#34;&#34;&#34;
        return self.get(key)

    def config_defaults(self, **config_mappings):
        &#34;&#34;&#34;
        Returns a decorator that replaces None default values with current config values.
        
        Args:
            **config_mappings: Mapping of parameter names to config keys
            
        Example:
            @config_manager.config_defaults(model=&#34;model&#34;, temp=&#34;temperature&#34;)
            def generate(prompt, model=None, temp=None):
                # model will be the current config value for &#34;model&#34; if None is passed
                # ...
        &#34;&#34;&#34;
        import functools
        import inspect
        
        def decorator(func):
            @functools.wraps(func)
            def wrapper(*args, **kwargs):
                # Get the function&#39;s signature
                sig = inspect.signature(func)
                bound_args = sig.bind_partial(*args, **kwargs)
                bound_args.apply_defaults()
                
                # For each parameter that maps to a config key
                for param_name, config_key in config_mappings.items():
                    # If the parameter is None, replace with config value
                    if param_name in bound_args.arguments and bound_args.arguments[param_name] is None:
                        kwargs[param_name] = self.get(config_key)
                
                return func(*args, **kwargs)
            
            return wrapper
        
        return decorator

# Create global instance of the configuration manager
config = utils.read_config_file()
utils.pretty_print_tinytroupe_version()
utils.pretty_print_datetime()
utils.pretty_print_config(config)
utils.start_logger(config)

config_manager = ConfigManager()

# For backwards compatibility, maintain the default dict
# but it&#39;s recommended to use config_manager instead
default = config_manager._config

# Helper function for method signatures
def get_config(key, override_value=None):
    &#34;&#34;&#34;
    Get a configuration value, with optional override.
    Used in method signatures to get current config values.
    
    Args:
        key (str): The configuration key
        override_value: If provided, this value is used instead of the config value
        
    Returns:
        The configuration value or the override value
    &#34;&#34;&#34;
    if override_value is not None:
        return override_value
    return config_manager.get(key)


## LLaMa-Index configs ########################################################
#from llama_index.embeddings.huggingface import HuggingFaceEmbedding

if config[&#34;OpenAI&#34;].get(&#34;API_TYPE&#34;) == &#34;azure&#34;:
    from llama_index.embeddings.azure_openai import AzureOpenAIEmbedding
else:
    from llama_index.embeddings.openai import OpenAIEmbedding

from llama_index.core import Settings, Document, VectorStoreIndex, SimpleDirectoryReader
from llama_index.readers.web import SimpleWebPageReader


# this will be cached locally by llama-index, in a OS-dependend location

##Settings.embed_model = HuggingFaceEmbedding(
##    model_name=&#34;BAAI/bge-small-en-v1.5&#34;
##)

if config[&#34;OpenAI&#34;].get(&#34;API_TYPE&#34;) == &#34;azure&#34;:
    llamaindex_openai_embed_model = AzureOpenAIEmbedding(model=default[&#34;embedding_model&#34;],
                                                        deployment_name=default[&#34;embedding_model&#34;],
                                                        api_version=default[&#34;azure_embedding_model_api_version&#34;],
                                                        embed_batch_size=10)
else:
    llamaindex_openai_embed_model = OpenAIEmbedding(model=default[&#34;embedding_model&#34;], embed_batch_size=10)
Settings.embed_model = llamaindex_openai_embed_model


###########################################################################
# Fixes and tweaks
###########################################################################

# fix an issue in the rich library: we don&#39;t want margins in Jupyter!
rich.jupyter.JUPYTER_HTML_FORMAT = \
    utils.inject_html_css_style_prefix(rich.jupyter.JUPYTER_HTML_FORMAT, &#34;margin:0px;&#34;)</code></pre>
</details>
</section>
<section>
<h2 class="section-title" id="header-submodules">Sub-modules</h2>
<dl>
<dt><code class="name"><a title="tinytroupe.agent" href="agent/index.html">tinytroupe.agent</a></code></dt>
<dd>
<div class="desc"><p>This module provides the main classes and functions for TinyTroupe's
agents …</p></div>
</dd>
<dt><code class="name"><a title="tinytroupe.control" href="control.html">tinytroupe.control</a></code></dt>
<dd>
<div class="desc"><p>Simulation controlling mechanisms.</p></div>
</dd>
<dt><code class="name"><a title="tinytroupe.enrichment" href="enrichment/index.html">tinytroupe.enrichment</a></code></dt>
<dd>
<div class="desc"></div>
</dd>
<dt><code class="name"><a title="tinytroupe.environment" href="environment/index.html">tinytroupe.environment</a></code></dt>
<dd>
<div class="desc"><p>Environments provide a structured way to define the world in which the
agents interact with each other as well as external entities (e.g., search …</p></div>
</dd>
<dt><code class="name"><a title="tinytroupe.examples" href="examples/index.html">tinytroupe.examples</a></code></dt>
<dd>
<div class="desc"></div>
</dd>
<dt><code class="name"><a title="tinytroupe.experimentation" href="experimentation/index.html">tinytroupe.experimentation</a></code></dt>
<dd>
<div class="desc"></div>
</dd>
<dt><code class="name"><a title="tinytroupe.extraction" href="extraction/index.html">tinytroupe.extraction</a></code></dt>
<dd>
<div class="desc"><p>Simulations produce a lot of data, and it is often useful to extract these data in a structured way. For instance, you might wish to:
- Extract the …</p></div>
</dd>
<dt><code class="name"><a title="tinytroupe.factory" href="factory/index.html">tinytroupe.factory</a></code></dt>
<dd>
<div class="desc"></div>
</dd>
<dt><code class="name"><a title="tinytroupe.openai_utils" href="openai_utils.html">tinytroupe.openai_utils</a></code></dt>
<dd>
<div class="desc"></div>
</dd>
<dt><code class="name"><a title="tinytroupe.profiling" href="profiling.html">tinytroupe.profiling</a></code></dt>
<dd>
<div class="desc"><p>Provides mechanisms for creating understanding the characteristics of agent populations, such as
their age distribution, typical interests, and so on …</p></div>
</dd>
<dt><code class="name"><a title="tinytroupe.steering" href="steering/index.html">tinytroupe.steering</a></code></dt>
<dd>
<div class="desc"></div>
</dd>
<dt><code class="name"><a title="tinytroupe.tools" href="tools/index.html">tinytroupe.tools</a></code></dt>
<dd>
<div class="desc"><p>Tools allow agents to accomplish specialized tasks.</p></div>
</dd>
<dt><code class="name"><a title="tinytroupe.utils" href="utils/index.html">tinytroupe.utils</a></code></dt>
<dd>
<div class="desc"><p>General utilities and convenience functions.</p></div>
</dd>
<dt><code class="name"><a title="tinytroupe.validation" href="validation/index.html">tinytroupe.validation</a></code></dt>
<dd>
<div class="desc"></div>
</dd>
</dl>
</section>
<section>
</section>
<section>
<h2 class="section-title" id="header-functions">Functions</h2>
<dl>
<dt id="tinytroupe.get_config"><code class="name flex">
<span>def <span class="ident">get_config</span></span>(<span>key, override_value=None)</span>
</code></dt>
<dd>
<div class="desc"><p>Get a configuration value, with optional override.
Used in method signatures to get current config values.</p>
<h2 id="args">Args</h2>
<dl>
<dt><strong><code>key</code></strong> :&ensp;<code>str</code></dt>
<dd>The configuration key</dd>
<dt><strong><code>override_value</code></strong></dt>
<dd>If provided, this value is used instead of the config value</dd>
</dl>
<h2 id="returns">Returns</h2>
<p>The configuration value or the override value</p></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def get_config(key, override_value=None):
    &#34;&#34;&#34;
    Get a configuration value, with optional override.
    Used in method signatures to get current config values.
    
    Args:
        key (str): The configuration key
        override_value: If provided, this value is used instead of the config value
        
    Returns:
        The configuration value or the override value
    &#34;&#34;&#34;
    if override_value is not None:
        return override_value
    return config_manager.get(key)</code></pre>
</details>
</dd>
</dl>
</section>
<section>
<h2 class="section-title" id="header-classes">Classes</h2>
<dl>
<dt id="tinytroupe.ConfigManager"><code class="flex name class">
<span>class <span class="ident">ConfigManager</span></span>
</code></dt>
<dd>
<div class="desc"><p>Manages configuration values with the ability to override defaults.
Provides dynamic access to the latest config values.</p></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">class ConfigManager:
    &#34;&#34;&#34;
    Manages configuration values with the ability to override defaults.
    Provides dynamic access to the latest config values.
    &#34;&#34;&#34;
    def __init__(self):
        self._config = {}
        self._initialize_from_config()
    
    def _initialize_from_config(self):
        &#34;&#34;&#34;Initialize default values from config file&#34;&#34;&#34;
        config = utils.read_config_file()
        
        self._config[&#34;model&#34;] = config[&#34;OpenAI&#34;].get(&#34;MODEL&#34;, &#34;gpt-4o&#34;)
        self._config[&#34;embedding_model&#34;] = config[&#34;OpenAI&#34;].get(&#34;EMBEDDING_MODEL&#34;, &#34;text-embedding-3-small&#34;)
        if config[&#34;OpenAI&#34;].get(&#34;API_TYPE&#34;) == &#34;azure&#34;:
            self._config[&#34;azure_embedding_model_api_version&#34;] = config[&#34;OpenAI&#34;].get(&#34;AZURE_EMBEDDING_MODEL_API_VERSION&#34;, &#34;2023-05-15&#34;)
        self._config[&#34;reasoning_model&#34;] = config[&#34;OpenAI&#34;].get(&#34;REASONING_MODEL&#34;, &#34;o3-mini&#34;)

        self._config[&#34;max_tokens&#34;] = int(config[&#34;OpenAI&#34;].get(&#34;MAX_TOKENS&#34;, &#34;1024&#34;))
        self._config[&#34;temperature&#34;] = float(config[&#34;OpenAI&#34;].get(&#34;TEMPERATURE&#34;, &#34;1.0&#34;))
        self._config[&#34;top_p&#34;] = int(config[&#34;OpenAI&#34;].get(&#34;TOP_P&#34;, &#34;0&#34;))
        self._config[&#34;frequency_penalty&#34;] = float(config[&#34;OpenAI&#34;].get(&#34;FREQ_PENALTY&#34;, &#34;0.0&#34;))
        self._config[&#34;presence_penalty&#34;] = float(
            config[&#34;OpenAI&#34;].get(&#34;PRESENCE_PENALTY&#34;, &#34;0.0&#34;))
        self._config[&#34;reasoning_effort&#34;] = config[&#34;OpenAI&#34;].get(&#34;REASONING_EFFORT&#34;, &#34;high&#34;)

        self._config[&#34;timeout&#34;] = float(config[&#34;OpenAI&#34;].get(&#34;TIMEOUT&#34;, &#34;30.0&#34;))
        self._config[&#34;max_attempts&#34;] = float(config[&#34;OpenAI&#34;].get(&#34;MAX_ATTEMPTS&#34;, &#34;0.0&#34;))
        self._config[&#34;waiting_time&#34;] = float(config[&#34;OpenAI&#34;].get(&#34;WAITING_TIME&#34;, &#34;1&#34;))
        self._config[&#34;exponential_backoff_factor&#34;] = float(config[&#34;OpenAI&#34;].get(&#34;EXPONENTIAL_BACKOFF_FACTOR&#34;, &#34;5&#34;))

        self._config[&#34;cache_api_calls&#34;] = config[&#34;OpenAI&#34;].getboolean(&#34;CACHE_API_CALLS&#34;, False)
        self._config[&#34;cache_file_name&#34;] = config[&#34;OpenAI&#34;].get(&#34;CACHE_FILE_NAME&#34;, &#34;openai_api_cache.pickle&#34;)

        self._config[&#34;max_content_display_length&#34;] = config[&#34;OpenAI&#34;].getint(&#34;MAX_CONTENT_DISPLAY_LENGTH&#34;, 1024)

        self._config[&#34;parallel_agent_actions&#34;] = config[&#34;Simulation&#34;].getboolean(&#34;PARALLEL_AGENT_ACTIONS&#34;, True)
        self._config[&#34;parallel_agent_generation&#34;] = config[&#34;Simulation&#34;].getboolean(&#34;PARALLEL_AGENT_GENERATION&#34;, True)

        self._config[&#34;enable_memory_consolidation&#34;] = config[&#34;Cognition&#34;].get(&#34;ENABLE_MEMORY_CONSOLIDATION&#34;, True)
        self._config[&#34;min_episode_length&#34;] = config[&#34;Cognition&#34;].getint(&#34;MIN_EPISODE_LENGTH&#34;, 30)
        self._config[&#34;max_episode_length&#34;] = config[&#34;Cognition&#34;].getint(&#34;MAX_EPISODE_LENGTH&#34;, 100)  
        self._config[&#34;episodic_memory_fixed_prefix_length&#34;] = config[&#34;Cognition&#34;].getint(&#34;EPISODIC_MEMORY_FIXED_PREFIX_LENGTH&#34;, 20)
        self._config[&#34;episodic_memory_lookback_length&#34;] = config[&#34;Cognition&#34;].getint(&#34;EPISODIC_MEMORY_LOOKBACK_LENGTH&#34;, 20)

        self._config[&#34;action_generator_max_attempts&#34;] = config[&#34;ActionGenerator&#34;].getint(&#34;MAX_ATTEMPTS&#34;, 2)
        self._config[&#34;action_generator_enable_quality_checks&#34;] = config[&#34;ActionGenerator&#34;].getboolean(&#34;ENABLE_QUALITY_CHECKS&#34;, False)
        self._config[&#34;action_generator_enable_regeneration&#34;] = config[&#34;ActionGenerator&#34;].getboolean(&#34;ENABLE_REGENERATION&#34;, False)
        self._config[&#34;action_generator_enable_direct_correction&#34;] = config[&#34;ActionGenerator&#34;].getboolean(&#34;ENABLE_DIRECT_CORRECTION&#34;, False)

        self._config[&#34;action_generator_enable_quality_check_for_persona_adherence&#34;] = config[&#34;ActionGenerator&#34;].getboolean(&#34;ENABLE_QUALITY_CHECK_FOR_PERSONA_ADHERENCE&#34;, False)
        self._config[&#34;action_generator_enable_quality_check_for_selfconsistency&#34;] = config[&#34;ActionGenerator&#34;].getboolean(&#34;ENABLE_QUALITY_CHECK_FOR_SELFCONSISTENCY&#34;, False)
        self._config[&#34;action_generator_enable_quality_check_for_fluency&#34;] = config[&#34;ActionGenerator&#34;].getboolean(&#34;ENABLE_QUALITY_CHECK_FOR_FLUENCY&#34;, False)
        self._config[&#34;action_generator_enable_quality_check_for_suitability&#34;] = config[&#34;ActionGenerator&#34;].getboolean(&#34;ENABLE_QUALITY_CHECK_FOR_SUITABILITY&#34;, False)
        self._config[&#34;action_generator_enable_quality_check_for_similarity&#34;] = config[&#34;ActionGenerator&#34;].getboolean(&#34;ENABLE_QUALITY_CHECK_FOR_SIMILARITY&#34;, False)

        self._config[&#34;action_generator_continue_on_failure&#34;] = config[&#34;ActionGenerator&#34;].getboolean(&#34;CONTINUE_ON_FAILURE&#34;, True)
        self._config[&#34;action_generator_quality_threshold&#34;] = config[&#34;ActionGenerator&#34;].getint(&#34;QUALITY_THRESHOLD&#34;, 2)
        
        self._raw_config = config
    
    def update(self, key, value):
        &#34;&#34;&#34;
        Update a configuration value.
        
        Args:
            key (str): The configuration key to update
            value: The new value to set
            
        Returns:
            None
        &#34;&#34;&#34;
        if key in self._config:
            self._config[key] = value
            logging.info(f&#34;Updated config: {key} = {value}&#34;)
        else:
            logging.warning(f&#34;Attempted to update unknown config key: {key}&#34;)
    
    def update_multiple(self, config_dict):
        &#34;&#34;&#34;
        Update multiple configuration values at once.
        
        Args:
            config_dict (dict): Dictionary of key-value pairs to update
            
        Returns:
            None
        &#34;&#34;&#34;
        for key, value in config_dict.items():
            self.update(key, value)
    
    def get(self, key, default=None):
        &#34;&#34;&#34;
        Get a configuration value.
        
        Args:
            key (str): The configuration key to retrieve
            default: The default value to return if key is not found
            
        Returns:
            The configuration value
        &#34;&#34;&#34;
        return self._config.get(key, default)
    
    def reset(self):
        &#34;&#34;&#34;Reset all configuration values to their original values from the config file.&#34;&#34;&#34;
        self._initialize_from_config()
        logging.info(&#34;All configuration values have been reset to defaults&#34;)
    
    def __getitem__(self, key):
        &#34;&#34;&#34;Allow dictionary-like access to configuration values.&#34;&#34;&#34;
        return self.get(key)

    def config_defaults(self, **config_mappings):
        &#34;&#34;&#34;
        Returns a decorator that replaces None default values with current config values.
        
        Args:
            **config_mappings: Mapping of parameter names to config keys
            
        Example:
            @config_manager.config_defaults(model=&#34;model&#34;, temp=&#34;temperature&#34;)
            def generate(prompt, model=None, temp=None):
                # model will be the current config value for &#34;model&#34; if None is passed
                # ...
        &#34;&#34;&#34;
        import functools
        import inspect
        
        def decorator(func):
            @functools.wraps(func)
            def wrapper(*args, **kwargs):
                # Get the function&#39;s signature
                sig = inspect.signature(func)
                bound_args = sig.bind_partial(*args, **kwargs)
                bound_args.apply_defaults()
                
                # For each parameter that maps to a config key
                for param_name, config_key in config_mappings.items():
                    # If the parameter is None, replace with config value
                    if param_name in bound_args.arguments and bound_args.arguments[param_name] is None:
                        kwargs[param_name] = self.get(config_key)
                
                return func(*args, **kwargs)
            
            return wrapper
        
        return decorator</code></pre>
</details>
<h3>Methods</h3>
<dl>
<dt id="tinytroupe.ConfigManager.config_defaults"><code class="name flex">
<span>def <span class="ident">config_defaults</span></span>(<span>self, **config_mappings)</span>
</code></dt>
<dd>
<div class="desc"><p>Returns a decorator that replaces None default values with current config values.</p>
<h2 id="args">Args</h2>
<dl>
<dt><strong><code>**config_mappings</code></strong></dt>
<dd>Mapping of parameter names to config keys</dd>
</dl>
<h2 id="example">Example</h2>
<p>@config_manager.config_defaults(model="model", temp="temperature")
def generate(prompt, model=None, temp=None):
# model will be the current config value for "model" if None is passed
# &hellip;</p></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def config_defaults(self, **config_mappings):
    &#34;&#34;&#34;
    Returns a decorator that replaces None default values with current config values.
    
    Args:
        **config_mappings: Mapping of parameter names to config keys
        
    Example:
        @config_manager.config_defaults(model=&#34;model&#34;, temp=&#34;temperature&#34;)
        def generate(prompt, model=None, temp=None):
            # model will be the current config value for &#34;model&#34; if None is passed
            # ...
    &#34;&#34;&#34;
    import functools
    import inspect
    
    def decorator(func):
        @functools.wraps(func)
        def wrapper(*args, **kwargs):
            # Get the function&#39;s signature
            sig = inspect.signature(func)
            bound_args = sig.bind_partial(*args, **kwargs)
            bound_args.apply_defaults()
            
            # For each parameter that maps to a config key
            for param_name, config_key in config_mappings.items():
                # If the parameter is None, replace with config value
                if param_name in bound_args.arguments and bound_args.arguments[param_name] is None:
                    kwargs[param_name] = self.get(config_key)
            
            return func(*args, **kwargs)
        
        return wrapper
    
    return decorator</code></pre>
</details>
</dd>
<dt id="tinytroupe.ConfigManager.get"><code class="name flex">
<span>def <span class="ident">get</span></span>(<span>self, key, default=None)</span>
</code></dt>
<dd>
<div class="desc"><p>Get a configuration value.</p>
<h2 id="args">Args</h2>
<dl>
<dt><strong><code>key</code></strong> :&ensp;<code>str</code></dt>
<dd>The configuration key to retrieve</dd>
<dt><strong><code>default</code></strong></dt>
<dd>The default value to return if key is not found</dd>
</dl>
<h2 id="returns">Returns</h2>
<p>The configuration value</p></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def get(self, key, default=None):
    &#34;&#34;&#34;
    Get a configuration value.
    
    Args:
        key (str): The configuration key to retrieve
        default: The default value to return if key is not found
        
    Returns:
        The configuration value
    &#34;&#34;&#34;
    return self._config.get(key, default)</code></pre>
</details>
</dd>
<dt id="tinytroupe.ConfigManager.reset"><code class="name flex">
<span>def <span class="ident">reset</span></span>(<span>self)</span>
</code></dt>
<dd>
<div class="desc"><p>Reset all configuration values to their original values from the config file.</p></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def reset(self):
    &#34;&#34;&#34;Reset all configuration values to their original values from the config file.&#34;&#34;&#34;
    self._initialize_from_config()
    logging.info(&#34;All configuration values have been reset to defaults&#34;)</code></pre>
</details>
</dd>
<dt id="tinytroupe.ConfigManager.update"><code class="name flex">
<span>def <span class="ident">update</span></span>(<span>self, key, value)</span>
</code></dt>
<dd>
<div class="desc"><p>Update a configuration value.</p>
<h2 id="args">Args</h2>
<dl>
<dt><strong><code>key</code></strong> :&ensp;<code>str</code></dt>
<dd>The configuration key to update</dd>
<dt><strong><code>value</code></strong></dt>
<dd>The new value to set</dd>
</dl>
<h2 id="returns">Returns</h2>
<p>None</p></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def update(self, key, value):
    &#34;&#34;&#34;
    Update a configuration value.
    
    Args:
        key (str): The configuration key to update
        value: The new value to set
        
    Returns:
        None
    &#34;&#34;&#34;
    if key in self._config:
        self._config[key] = value
        logging.info(f&#34;Updated config: {key} = {value}&#34;)
    else:
        logging.warning(f&#34;Attempted to update unknown config key: {key}&#34;)</code></pre>
</details>
</dd>
<dt id="tinytroupe.ConfigManager.update_multiple"><code class="name flex">
<span>def <span class="ident">update_multiple</span></span>(<span>self, config_dict)</span>
</code></dt>
<dd>
<div class="desc"><p>Update multiple configuration values at once.</p>
<h2 id="args">Args</h2>
<dl>
<dt><strong><code>config_dict</code></strong> :&ensp;<code>dict</code></dt>
<dd>Dictionary of key-value pairs to update</dd>
</dl>
<h2 id="returns">Returns</h2>
<p>None</p></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def update_multiple(self, config_dict):
    &#34;&#34;&#34;
    Update multiple configuration values at once.
    
    Args:
        config_dict (dict): Dictionary of key-value pairs to update
        
    Returns:
        None
    &#34;&#34;&#34;
    for key, value in config_dict.items():
        self.update(key, value)</code></pre>
</details>
</dd>
</dl>
</dd>
</dl>
</section>
</article>
<nav id="sidebar">
<h1>Index</h1>
<div class="toc">
<ul></ul>
</div>
<ul id="index">
<li><h3><a href="#header-submodules">Sub-modules</a></h3>
<ul>
<li><code><a title="tinytroupe.agent" href="agent/index.html">tinytroupe.agent</a></code></li>
<li><code><a title="tinytroupe.control" href="control.html">tinytroupe.control</a></code></li>
<li><code><a title="tinytroupe.enrichment" href="enrichment/index.html">tinytroupe.enrichment</a></code></li>
<li><code><a title="tinytroupe.environment" href="environment/index.html">tinytroupe.environment</a></code></li>
<li><code><a title="tinytroupe.examples" href="examples/index.html">tinytroupe.examples</a></code></li>
<li><code><a title="tinytroupe.experimentation" href="experimentation/index.html">tinytroupe.experimentation</a></code></li>
<li><code><a title="tinytroupe.extraction" href="extraction/index.html">tinytroupe.extraction</a></code></li>
<li><code><a title="tinytroupe.factory" href="factory/index.html">tinytroupe.factory</a></code></li>
<li><code><a title="tinytroupe.openai_utils" href="openai_utils.html">tinytroupe.openai_utils</a></code></li>
<li><code><a title="tinytroupe.profiling" href="profiling.html">tinytroupe.profiling</a></code></li>
<li><code><a title="tinytroupe.steering" href="steering/index.html">tinytroupe.steering</a></code></li>
<li><code><a title="tinytroupe.tools" href="tools/index.html">tinytroupe.tools</a></code></li>
<li><code><a title="tinytroupe.utils" href="utils/index.html">tinytroupe.utils</a></code></li>
<li><code><a title="tinytroupe.validation" href="validation/index.html">tinytroupe.validation</a></code></li>
</ul>
</li>
<li><h3><a href="#header-functions">Functions</a></h3>
<ul class="">
<li><code><a title="tinytroupe.get_config" href="#tinytroupe.get_config">get_config</a></code></li>
</ul>
</li>
<li><h3><a href="#header-classes">Classes</a></h3>
<ul>
<li>
<h4><code><a title="tinytroupe.ConfigManager" href="#tinytroupe.ConfigManager">ConfigManager</a></code></h4>
<ul class="">
<li><code><a title="tinytroupe.ConfigManager.config_defaults" href="#tinytroupe.ConfigManager.config_defaults">config_defaults</a></code></li>
<li><code><a title="tinytroupe.ConfigManager.get" href="#tinytroupe.ConfigManager.get">get</a></code></li>
<li><code><a title="tinytroupe.ConfigManager.reset" href="#tinytroupe.ConfigManager.reset">reset</a></code></li>
<li><code><a title="tinytroupe.ConfigManager.update" href="#tinytroupe.ConfigManager.update">update</a></code></li>
<li><code><a title="tinytroupe.ConfigManager.update_multiple" href="#tinytroupe.ConfigManager.update_multiple">update_multiple</a></code></li>
</ul>
</li>
</ul>
</li>
</ul>
</nav>
</main>
<footer id="footer">
<p>Generated by <a href="https://pdoc3.github.io/pdoc" title="pdoc: Python API documentation generator"><cite>pdoc</cite> 0.10.0</a>.</p>
</footer>
</body>
</html>